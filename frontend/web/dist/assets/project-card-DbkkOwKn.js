import{u as p,R as f,b as x,j as e,d as b,r as h}from"./main-BRBmBfib.js";import{C as D,a as C,b as j,d as N,e as S}from"./card-NUpx7Cfs.js";import{B as c}from"./button-DbSkgT2t.js";import{D as U,a as g,b as w,c as I}from"./dropdown-menu-HV7dObZm.js";import{u as k}from"./useClientDatabaseService-LbjPd-gK.js";import{u as l}from"./useAppSelector-CyLvQFay.js";import{u as v}from"./use-show-toast-pBj5rELm.js";import"./index-TQcdx2pj.js";import"./index-Cqpvy3nm.js";import"./index-D2UMsRiz.js";import"./index-DBRwn16R.js";import"./check-DbCPP-S1.js";import"./createLucideIcon-2R7JpQwx.js";import"./serviceHandler-BlQljMi1.js";import"./useRequest-BDd-VPdU.js";import"./useAuthState-DZ8zva8G.js";import"./BaseEntity-DGhPHkWu.js";function O({projectViewModel:a}){const i=p(),[t,n]=f.useState(),{connectClientDatabase:d}=k(),o=l(s=>s.clientDatabase.clientDatabase),r=v(),m=l(x),u=async()=>{o?.UUID!=t?.UUID?await d(t?.UUID??"",{onSuccess:s=>{i(b(s)),r("Success","Successfully connecting user to database","success")},onError:()=>{r("Error","Failed to connect user to database","error")}}):(o&&n(o),r("Success","Successfully connecting user to database","success")),h.visit(`/backend/api-test/dashboard?id=${a?.UUID}`)};return e.jsxs(D,{className:"w-full h-full flex flex-col",children:[e.jsx(C,{children:e.jsx(j,{className:"text-center font-semibold",children:a.projectCode})}),e.jsxs(N,{className:"flex flex-col gap-2 flex-1 mb-2",children:[e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Project: "}),e.jsx("span",{className:"font-normal",children:a.projectName})]}),e.jsxs(U,{children:[e.jsx(g,{asChild:!0,children:e.jsx(c,{variant:"outline",children:t?t.databaseName:"Select Database"})}),e.jsx(w,{children:a.clientDatabases.map(s=>e.jsx(I,{onClick:()=>n(s),children:s.databaseName},s.UUID))})]})]}),e.jsx(S,{className:"flex flex-col w-full mt-auto",children:e.jsx(c,{className:"w-full",disabled:m,onClick:u,children:"Connect"})})]})}export{O as default};
