import{a as h,j as o}from"./main-CRC8HOaX.js";import{a as c,b as d,c as x,d as u}from"./form-Lcs4l44x.js";import{u as E}from"./index.esm-CJA05T6O.js";import{a as g}from"./zod-DEZpPwn0.js";import{A}from"./ApiTestViewModel-BZncyWgE.js";import{A as s}from"./ApiTestFormField-BnCEFvC1.js";import{A as i}from"./ApiTestDataFormField-CDVSd5pi.js";import{o as b,s as t,n as j,b as y}from"./schemas-D95ZC4Tg.js";import{T as f}from"./textarea-DpmqiAZ_.js";import{u as T}from"./useAppSelector-B-pSj3Rs.js";import{s as w}from"./apiTestSelectors-BJyltacD.js";const S=b({enabled:j().optional(),key:t().max(i.key.max,{error:i.key.maxError}).optional(),value:t().max(i.value.max,{error:i.value.maxError}).optional(),description:t().max(i.description.max,{error:i.description.maxError}).optional()}),N=b({testName:t().max(s.testName.max,{error:s.testName.maxError}),parentApiTest:t().optional(),clientDatabase:t(),project:t(),isFolder:j(),transmission:t(),description:t().max(s.description.max,{error:s.description.maxError}).optional(),moreDescription:t().max(s.moreDescription.max,{error:s.moreDescription.maxError}).optional()}).extend({apiTestData:y(S).default([]).optional()}),V=({apiTestDTO:n})=>{const[e,m]=h.useState(()=>n?new A(n):null),r=E({resolver:g(N),defaultValues:{parentApiTest:e?.parentApiTest??"",clientDatabase:e?.clientDatabase??"",project:e?.project??"",testName:e?.testName??"",isFolder:e?.isFolder??0,transmission:e?.transmission??"",description:e?.description??"",moreDescription:e?.moreDescription??"",apiTestData:e?.apiTestData?.rows??[]}});return{form:r,setFormError:(v,D)=>{const{setToastError:F}=D||{},a=v?.response?.data?.errors??{};typeof a=="string"?F?.(a):a&&Object.keys(a).length>0&&Object.keys(a).forEach(l=>{const p=l.replace(/^apiTest\./,"");p in r.getValues()&&r.setError(p,{type:"server",message:a[l][0]??"Invalid value"})})},apiTestViewModel:e,setApiTestViewModel:m}};function k(){const n=T(r=>r.loading.global),e=T(w),{form:m}=V({apiTestDTO:e});return o.jsxs("div",{className:"w-full",children:[o.jsx(c,{control:m.control,name:s.description.name,render:({field:r})=>o.jsxs(d,{children:[o.jsx(x,{children:s.description.label}),o.jsx(u,{children:o.jsx(f,{...r,value:r.value??"",disabled:n,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})}),o.jsx(c,{control:m.control,name:s.moreDescription.name,render:({field:r})=>o.jsxs(d,{children:[o.jsx(x,{children:s.moreDescription.label}),o.jsx(u,{children:o.jsx(f,{...r,value:r.value??"",disabled:n,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})})]})}const G=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));export{k as D,G as d,V as u};
