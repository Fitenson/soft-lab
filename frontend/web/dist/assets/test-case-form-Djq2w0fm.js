import{e as N,u as g,a as d,j as s,f as v,g as T,h as A,t as S,i as F,k as U}from"./main-C3T8v2Y3.js";import{I}from"./input-DFKWGPka.js";import{F as w,a as C,b as E,c as k,d as y}from"./form-BMjj30Jq.js";import{T as O,a as B,b as m,c as n}from"./tabs-B3GuGs-k.js";import{u as L,A as f}from"./useApiTestForm-B3ZP6HQr.js";import R from"./documentation-tab-DOUvRO_T.js";import M from"./data-tab-DE9fr2vR.js";import P from"./scenario-tab-BBOdiMP1.js";import{u as x}from"./useAppSelector-Dr5dKxoe.js";import{B as V}from"./button-BVAFB7K0.js";import{s as q}from"./apiTestSelectors-BJyltacD.js";import{u as z}from"./useApiTestService-D1GdM3Gu.js";import{s as G}from"./clientDatabaseSelectors-Cw1rL9yb.js";import{u as H}from"./use-show-toast-BFRPeaKN.js";import"./zod-CppQPhVw.js";import"./schemas-D95ZC4Tg.js";import"./index-zaf3DvTm.js";import"./index-BJD7Zyyu.js";import"./ApiTestViewModel-BZncyWgE.js";import"./textarea-Cel9cF4_.js";import"./select-CtSWKeOS.js";import"./index-CBR0o2Q_.js";import"./index-BeVAE0RU.js";import"./createLucideIcon-CzpkQQ2n.js";import"./check-toIaySd3.js";import"./api-test-data-table-CLTBrZm0.js";import"./index-TwuOSZMG.js";import"./table-ClfY3imz.js";import"./ColumnConfig-D45u5Gny.js";import"./useRequest-BOCZ1WTL.js";import"./useAuthState-C4NiYI8C.js";import"./BaseEntity-DGhPHkWu.js";import"./serviceHandler-BlQljMi1.js";import"./ClientDatabaseViewModel-CZz8IN5P.js";function Ss(){const{id:h}=N().props,a=x(q),c=x(G),{form:e}=L({apiTestDTO:a}),t=g(),{createApiTest:j}=z(),D=H();d.useEffect(()=>{e.setValue("testName",a?.testName??""),e.setValue("transmission",a?.transmission??"formData")},[a,e]);const b=async o=>{const r=c?.password,l=c?.UUID;console.log("Test Data",e.getValues());const p=[a?.UUID].filter(i=>i!==void 0);if(l&&r){const i={...o,project:h,clientDatabase:l,apiTestData:{total:(o.apiTestData?.length??0).toString(),rows:o.apiTestData}};await j(i,r,{onSuccess:async u=>{t(T(p)),t(A(u)),t(S({action:null})),t(F({UUID:"",newName:""})),t(U(u))}})}else t(T(p)),D("Error","Missing database token","error")};return s.jsx("div",{className:"h-full w-full",children:a&&s.jsx(d.Fragment,{children:s.jsx(w,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(b),children:[s.jsxs("div",{className:"flex items-end gap-2 m-2",children:[s.jsx(C,{name:f.testName.name,control:e.control,render:({field:o})=>s.jsxs(E,{className:"flex-1",children:[s.jsx(k,{children:f.testName.label}),s.jsx(y,{children:s.jsx(I,{...o,onChange:r=>{o.onChange(r),t(v(r.target.value))}})})]})}),s.jsx(V,{className:"p-2 px-6",children:"Save"})]}),s.jsxs(O,{className:"w-full m-2",defaultValue:"data",children:[s.jsxs(B,{className:"w-full flex justify-start",children:[s.jsx(m,{className:"cursor-pointer",value:"documentation",children:"Documentation"}),s.jsx(m,{className:"cursor-pointer",value:"data",children:"Data"}),s.jsx(m,{className:"cursor-pointer",value:"scenario",children:"Scenario"})]}),s.jsx(n,{value:"documentation",className:"m-2",children:s.jsx(R,{})}),s.jsx(n,{value:"data",className:"m-2",children:s.jsx(M,{})}),s.jsx(n,{value:"scenario",className:"m-2",children:s.jsx(P,{})})]})]})})})})}export{Ss as default};
