import{b as u,m,u as f,n as i,o as c,p as g,r as b}from"./main-D2F9KyVn.js";import{u as w}from"./useAppSelector-w1_Hwefa.js";import{u as x}from"./useAuthState-DAnHfUPx.js";const S=()=>{const{authViewModel:s}=x(),a=u.useMemo(()=>m.create({baseURL:"http://softlab-backend.test/backend",withCredentials:!0}),[]),d=w(e=>e.loading.global),h=f(),[l,p]=u.useState(null);return{isLoading:d,error:l,request:async e=>{const r=e?.withLoading!==!1;let o={};if(r&&i.dispatch(c(!0)),s){const t=`${s.username}:${s.password}`;o={Authorization:`Basic ${btoa(t)}`}}try{return(await a.request({url:e?.url,method:e?.method,data:e?.data,...e?.config,headers:{"Content-Type":"multipart/form-data",...o,...e?.headers}})).data}catch(t){const n=t;throw n.response&&n.response.status===401&&(h(g()),b.visit("/login")),p(t),t}finally{r&&i.dispatch(c(!1))}},axiosInstance:a}};export{S as u};
