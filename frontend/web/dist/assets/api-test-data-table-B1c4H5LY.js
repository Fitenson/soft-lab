import{c as R,a as p,j as e,E as W,P as Z,N as F,Y as ee,L as B,M as A,at as ae,x as te,R as re,b as oe}from"./main-BzcX9rHB.js";import{u as ne,f as I,b as se}from"./index-DlCoahAH.js";import{T as le,a as ce,b as E,c as ie,d as de,e as D,S as ue}from"./table-DrOT-jRa.js";import{c as S}from"./ColumnConfig-COplPqVL.js";import{u as me}from"./index-CDvMsUPW.js";import{C as pe}from"./check-Cyf1zOie.js";import{u as be}from"./useAppSelector-BEgmfvAz.js";import{I as fe}from"./input-0Fyeeb7S.js";import{a as z,b as he,d as M}from"./form-BckQJ346.js";import{A as xe}from"./ApiTestDataViewModel-DGSq7Ifc.js";import{u as ke,a as ge,d as Ce}from"./zod-DJiVD7ng.js";import{o as L,b as ve,s as j,n as K}from"./schemas-D95ZC4Tg.js";import"./button-BM4q8FZR.js";import"./createLucideIcon-CkMHkm6z.js";const l={enabled:R({name:"enabled",label:"Enabled"}),key:R({name:"key",label:"Key",max:100}),value:R({name:"value",label:"Value"}),description:R({name:"description",label:"Description",max:500}),fieldType:R({name:"fieldType",label:"Field Type",max:100})};var N="Checkbox",[ye,Ue]=W(N),[je,P]=ye(N);function Re(r){const{__scopeCheckbox:n,checked:d,children:s,defaultChecked:c,disabled:o,form:b,name:m,onCheckedChange:i,required:C,value:v="on",internal_do_not_use_render:t}=r,[a,f]=ee({prop:d,defaultProp:c??!1,onChange:i,caller:N}),[h,x]=p.useState(null),[g,u]=p.useState(null),k=p.useRef(!1),T=h?!!b||!!h.closest("form"):!0,w={checked:a,disabled:o,setChecked:f,control:h,setControl:x,name:m,form:b,value:v,hasConsumerStoppedPropagationRef:k,required:C,defaultChecked:y(c)?!1:c,isFormControl:T,bubbleInput:g,setBubbleInput:u};return e.jsx(je,{scope:n,...w,children:Ee(t)?t(w):s})}var $="CheckboxTrigger",H=p.forwardRef(({__scopeCheckbox:r,onKeyDown:n,onClick:d,...s},c)=>{const{control:o,value:b,disabled:m,checked:i,required:C,setControl:v,setChecked:t,hasConsumerStoppedPropagationRef:a,isFormControl:f,bubbleInput:h}=P($,r),x=B(c,v),g=p.useRef(i);return p.useEffect(()=>{const u=o?.form;if(u){const k=()=>t(g.current);return u.addEventListener("reset",k),()=>u.removeEventListener("reset",k)}},[o,t]),e.jsx(F.button,{type:"button",role:"checkbox","aria-checked":y(i)?"mixed":i,"aria-required":C,"data-state":X(i),"data-disabled":m?"":void 0,disabled:m,value:b,...s,ref:x,onKeyDown:A(n,u=>{u.key==="Enter"&&u.preventDefault()}),onClick:A(d,u=>{t(k=>y(k)?!0:!k),h&&f&&(a.current=u.isPropagationStopped(),a.current||u.stopPropagation())})})});H.displayName=$;var q=p.forwardRef((r,n)=>{const{__scopeCheckbox:d,name:s,checked:c,defaultChecked:o,required:b,disabled:m,value:i,onCheckedChange:C,form:v,...t}=r;return e.jsx(Re,{__scopeCheckbox:d,checked:c,defaultChecked:o,disabled:m,required:b,onCheckedChange:C,name:s,form:v,value:i,internal_do_not_use_render:({isFormControl:a})=>e.jsxs(e.Fragment,{children:[e.jsx(H,{...t,ref:n,__scopeCheckbox:d}),a&&e.jsx(U,{__scopeCheckbox:d})]})})});q.displayName=N;var O="CheckboxIndicator",V=p.forwardRef((r,n)=>{const{__scopeCheckbox:d,forceMount:s,...c}=r,o=P(O,d);return e.jsx(Z,{present:s||y(o.checked)||o.checked===!0,children:e.jsx(F.span,{"data-state":X(o.checked),"data-disabled":o.disabled?"":void 0,...c,ref:n,style:{pointerEvents:"none",...r.style}})})});V.displayName=O;var G="CheckboxBubbleInput",U=p.forwardRef(({__scopeCheckbox:r,...n},d)=>{const{control:s,hasConsumerStoppedPropagationRef:c,checked:o,defaultChecked:b,required:m,disabled:i,name:C,value:v,form:t,bubbleInput:a,setBubbleInput:f}=P(G,r),h=B(d,f),x=me(o),g=ae(s);p.useEffect(()=>{const k=a;if(!k)return;const T=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(T,"checked").set,J=!c.current;if(x!==o&&_){const Q=new Event("click",{bubbles:J});k.indeterminate=y(o),_.call(k,y(o)?!1:o),k.dispatchEvent(Q)}},[a,x,o,c]);const u=p.useRef(y(o)?!1:o);return e.jsx(F.input,{type:"checkbox","aria-hidden":!0,defaultChecked:b??u.current,required:m,disabled:i,name:C,value:v,form:t,...n,tabIndex:-1,ref:h,style:{...n.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});U.displayName=G;function Ee(r){return typeof r=="function"}function y(r){return r==="indeterminate"}function X(r){return y(r)?"indeterminate":r?"checked":"unchecked"}function Y({className:r,...n}){return e.jsx(q,{"data-slot":"checkbox",className:te("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...n,children:e.jsx(V,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(pe,{className:"size-3.5"})})})}function Se(r,n){return({getValue:d,row:s})=>{const c=!!d(),o=s.original,b=n?.disabled?.(o)??!1,m=n?.ariaLabel?.(o)??"Toggle";return e.jsx("div",{className:"flex items-center",onClick:i=>i.stopPropagation(),children:e.jsx(Y,{checked:c,disabled:b,"aria-label":m,onCheckedChange:i=>r({row:o,next:!!i}),className:"translate-y-[1px]"})})}}const Ne=[S({accessorKey:l.enabled.name,header:null,size:44,minSize:36,maxSize:64,enableSorting:!1,cell:Se(({row:r,next:n})=>{console.log(r),console.log(n)},{})}),S({accessorKey:l.key.name,header:l.key.label,enableSorting:!1}),S({accessorKey:l.value.name,header:l.value.label,enableSorting:!1}),S({accessorKey:l.description.name,header:l.description.label,enableSorting:!1})],Te=L({enabled:K().optional(),key:j().max(l.key.max,{error:l.key.maxError}).optional(),value:j().max(l.value.max,{error:l.value.maxError}).optional(),description:j().max(l.description.max,{error:l.description.maxError}).optional()}),we=L({enabled:K().optional(),key:j().max(l.key.max,{error:l.key.maxError}).optional(),value:j().max(l.value.max,{error:l.value.maxError}).optional(),description:j().max(l.description.max,{error:l.description.maxError}).optional(),data:ve(Te).default([]).optional()}),Fe=({apiTestDataDTOs:r})=>{const n=re.useMemo(()=>(r??[]).map(s=>new xe(s)),[r]);return{form:ke({resolver:ge(we),defaultValues:{enabled:1,key:"",value:"",description:"",data:n.map(s=>({enabled:s.enabled,key:s.key??"",value:s.value??"",description:s.description??""}))}}),apiTestDataViewModels:n}},Pe=["key","value","description"],_e=r=>Pe.includes(r);function Xe({data:r}){const{form:n,apiTestDataViewModels:d}=Fe({apiTestDataDTOs:r}),{fields:s,append:c}=Ce({control:n.control,name:"data"}),o=ne({data:d,columns:Ne,enableRowSelection:!0,enableSorting:!1,enableFilters:!1,enableSortingRemoval:!1,getCoreRowModel:se()}),b=be(oe),m=p.useRef(null),i=t=>{if(typeof t=="number"){if(m.current===t)return;m.current=t}c({enabled:0,key:"",value:"",description:""},{shouldFocus:!1})},C=(t,a)=>{n.setValue(`data.${t}.enabled`,a),t===s.length-1&&a===1&&i(t)},v=t=>{t===s.length-1&&i(t)};return p.useEffect(()=>{s.length===0&&(c({enabled:0,key:"",value:"",description:""},{shouldFocus:!1}),m.current=null)},[s.length,c]),e.jsxs(le,{className:"card",children:[e.jsx(ce,{children:o.getHeaderGroups().map(t=>e.jsx(E,{className:"border-b border-accent dark:border-accent",children:t.headers.map(a=>e.jsxs(ie,{className:"m-0 p-0 border-r border-accent dark:border-accent last:border-r-0",style:{width:a.getSize()},children:[a.isPlaceholder?null:I(a.column.columnDef.header,a.getContext()),a.column.getCanResize()&&e.jsx("div",{onMouseDown:a.getResizeHandler(),onTouchStart:a.getResizeHandler(),className:`absolute right-0 top-0 h-full w-1 cursor-col-resize select-none
                                            ${a.column.getIsResizing()?"bg-blue-500":"bg-transparent hover:bg-gray-400"}`})]},a.id))},t.id))}),e.jsx(de,{children:o.getRowModel().rows?.length?o.getRowModel().rows.map(t=>e.jsx(E,{className:`cursor-pointer p-2 border border-accent dark:border-accent ${t.getIsSelected(),"text-foreground dark:text-foreground"}`,"data-state":t.getIsSelected()&&"selected",children:t.getVisibleCells().map(a=>e.jsx(D,{className:"p-2.5 border-2 border-accent dark:border-accent",children:I(a.column.columnDef.cell,a.getContext())},a.id))},t.id)):b?Array.from({length:5}).map((t,a)=>e.jsx(E,{children:o.getAllLeafColumns().map(f=>e.jsx("td",{className:"px-2 py-2",children:e.jsx(ue,{className:"h-4 w-full rounded-2xl p-4 m-1 gap-2"})},f.id))},`skeleton-${a}`)):s.map((t,a)=>e.jsx(E,{children:o.getAllLeafColumns().map(f=>e.jsx(D,{className:"p-2",children:f.id===l.enabled.name?e.jsx(z,{control:n.control,name:`data.${a}.enabled`,render:({field:h})=>e.jsx(he,{children:e.jsx(M,{children:e.jsx("div",{onClick:x=>x.stopPropagation(),className:"flex items-center",children:e.jsx(Y,{checked:h.value===1,onCheckedChange:x=>{const g=x===!0?1:0;h.onChange(g),C(a,g)},"aria-label":"Toggle",className:"cursor-pointer h-6 w-6 shrink-0 translate-y-[1px]"})})})})}):_e(f.id)&&e.jsx(z,{control:n.control,name:`data.${a}.${f.id}`,render:({field:{value:h,onChange:x,...g}})=>e.jsx(M,{children:e.jsx(fe,{...g,value:h??"",onChange:u=>x(u.target.value),onFocus:()=>v(a),className:"w-full h-8"})})})},f.id))},`input-row-${a}`))})]})}export{Xe as default};
