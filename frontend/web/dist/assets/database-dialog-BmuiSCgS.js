import{j as a,b as w}from"./main-Cm4p_1js.js";import{R as F,T as D,D as E,a as N}from"./index-CKg6FBIQ.js";import{a as S,c as n}from"./utils-BLojDQQ3.js";import{B as v}from"./button-dHaCR1q6.js";import{F as C,a as m,b as l,c as d,d as c,e as x}from"./form-DwvkXfiW.js";import{I as i}from"./input-DC1wILaG.js";import{u as V,a as y}from"./zod-B6pZR_IT.js";import{C as I}from"./ClientDatabaseViewModel-DsBbqFSV.js";import{o as M,s as j}from"./schemas-6m5s2bNq.js";import"./index-VdbWy-Im.js";import"./index-D8MhFzSr.js";function T({...o}){return a.jsx(F,{"data-slot":"dialog",...o})}function R({...o}){return a.jsx(D,{"data-slot":"dialog-trigger",...o})}function k({className:o,...r}){return a.jsx("div",{"data-slot":"dialog-header",className:S("flex flex-col gap-2 text-center sm:text-left",o),...r})}const e={databaseName:n({name:"databaseName",label:"Database Name",max:50}),databaseSchema:n({name:"databaseSchema",label:"Database Schema",max:50}),host:n({name:"host",label:"Host",max:50}),port:n({name:"port",label:"Port",max:50}),username:n({name:"username",label:"Username",max:50}),password:n({name:"password",label:"Password",max:50})},A=M({databaseName:j().max(e.databaseName.max,{error:e.databaseName.maxError}),databaseSchema:j().max(e.databaseSchema.max,{error:e.databaseSchema.maxError}),host:j().max(e.host.max,{error:e.host.maxError}),port:j().max(e.port.max,{error:e.port.maxError}),username:j().max(e.username.max,{error:e.username.maxError}),password:j().max(e.password.max,{error:e.password.maxError})}),B=({clientDatabaseDTO:o})=>{const[r,s]=w.useState(()=>o?new I(o):void 0),h=V({resolver:y(A),defaultValues:{databaseName:r?.databaseName??"",databaseSchema:r?.databaseSchema??"",host:r?.host??"",port:r?.port??"",username:r?.username??"",password:r?.password??""}});return{form:h,setFormError:(u,f)=>{const{setToastError:g}=f||{},t=u?.response?.data?.errors??{};typeof t=="string"?g?.(t):t&&Object.keys(t).length>0&&Object.keys(t).forEach(b=>{const p=b.replace(/^clientDatabase\./,"");p in h.getValues()&&h.setError(p,{type:"server",message:t[b][0]??"Invalid value"})})},clientDatabaseViewModel:r,setClientDatabaseViewModel:s}};function Y({clientDatabaseDTO:o}){const{form:r}=B({clientDatabaseDTO:o});return a.jsxs(T,{children:[a.jsx(R,{children:a.jsx(v,{children:"Add connection"})}),a.jsxs(E,{className:"sm:max-w-[520px]",children:[a.jsx(k,{children:a.jsx(N,{children:"Add new database connection"})}),a.jsx("div",{className:"w-full",children:a.jsx(C,{...r,children:a.jsxs("form",{children:[a.jsx(m,{control:r.control,name:e.databaseName.name,render:({field:s})=>a.jsxs(l,{children:[a.jsx(d,{children:e.databaseName.label}),a.jsx(c,{children:a.jsx(i,{...s})}),a.jsx(x,{})]})}),a.jsx(m,{control:r.control,name:e.databaseSchema.name,render:({field:s})=>a.jsxs(l,{children:[a.jsx(d,{children:e.databaseSchema.label}),a.jsx(c,{children:a.jsx(i,{...s})}),a.jsx(x,{})]})}),a.jsx(m,{control:r.control,name:e.host.name,render:({field:s})=>a.jsxs(l,{children:[a.jsx(d,{children:e.host.label}),a.jsx(c,{children:a.jsx(i,{...s})}),a.jsx(x,{})]})}),a.jsx(m,{control:r.control,name:e.port.name,render:({field:s})=>a.jsxs(l,{children:[a.jsx(d,{children:e.port.label}),a.jsx(c,{children:a.jsx(i,{...s})}),a.jsx(x,{})]})}),a.jsx(m,{control:r.control,name:e.username.name,render:({field:s})=>a.jsxs(l,{children:[a.jsx(d,{children:e.username.label}),a.jsx(c,{children:a.jsx(i,{...s})}),a.jsx(x,{})]})}),a.jsx(m,{control:r.control,name:e.password.name,render:({field:s})=>a.jsxs(l,{children:[a.jsx(d,{children:e.password.label}),a.jsx(c,{children:a.jsx(i,{...s})}),a.jsx(x,{})]})})]})})})]})]})}export{Y as default};
