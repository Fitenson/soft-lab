import{u,R as f,j as e,f as h,g as p,r as j}from"./main-DDq5fYn4.js";import{C,a as g,b as N,d as v,e as D}from"./card-BYqd-lSs.js";import{B as r}from"./button-DY5AwLVp.js";import{u as b,D as S,a as U,b as w,c as k,d as y,e as E,f as T,g as R}from"./useClientDatabaseService-CyzYwHbA.js";import{u as F}from"./use-show-toast-tOYp_drR.js";import"./index-C71pS_cT.js";import"./index-D6w-k8fw.js";import"./x-k7glXLur.js";import"./createLucideIcon-mArrbn_f.js";import"./serviceHandler-BlQljMi1.js";import"./useRequest-okGnsHTs.js";import"./useAppSelector-BHq4wpaJ.js";import"./useAuthState-aewZeu2X.js";import"./BaseEntity-DGhPHkWu.js";import"./ClientDatabaseViewModel-DgDoSkZt.js";function Y({clientDatabaseViewModel:s}){const a=F(),o=u(),[c,n]=f.useState(!1),{removeClientDatabase:i,connectClientDatabase:m}=b(),d=async()=>{const t=[s.UUID];await i(t,{onSuccess:l=>{l.success&&l.success.length>0?(o(h(s.UUID)),a("Success","Connection successfully removed","success"),n(!1)):a("Error","Failed to remove the connection","error")},onError:()=>{a("Error","Server error","error")}})},x=async()=>{await m(s.UUID,{onSuccess:t=>{o(p(t)),j.visit("/backend/client-database/database-dashboard")},onError:()=>{a("Error","Failed to connect","error")}})};return e.jsxs(C,{className:"w-full h-full",children:[e.jsx(g,{children:e.jsx(N,{className:"text-center font-semibold",children:s.databaseName})}),e.jsxs(v,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Project: "}),e.jsx("span",{className:"font-normal",children:s.projectName})]}),e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Schema: "}),e.jsx("span",{className:"font-normal",children:s.databaseName})]}),e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Port: "}),e.jsx("span",{className:"font-normal",children:s.port})]}),e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Username: "}),e.jsx("span",{className:"font-normal",children:s.username})]})]}),e.jsxs(D,{className:"flex flex-col w-full gap-2",children:[e.jsx(r,{className:"w-full",onClick:x,children:"Connect"}),e.jsxs(S,{open:c,onOpenChange:n,children:[e.jsx(U,{asChild:!0,children:e.jsx(r,{variant:"destructive",className:"w-full",children:"Delete"})}),e.jsxs(w,{className:"sm:max-w-[425px]",children:[e.jsxs(k,{children:[e.jsx(y,{children:"Delete Connection"}),e.jsx(E,{children:"Are you sure you want to delete this connection? This action cannot be undone."})]}),e.jsxs(T,{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2",children:[e.jsx(R,{asChild:!0,children:e.jsx(r,{variant:"outline",className:"sm:w-auto w-full",children:"Cancel"})}),e.jsx(r,{onClick:d,variant:"destructive",className:"sm:w-auto w-full",children:"Remove"})]})]})]})]})]})}export{Y as default};
