import{b as s,y as F,j as n,w as H,F as q,E as h,k as I,a as V,u as X,a7 as _,a8 as K,t as W,a9 as Z,aa as Y,ab as J}from"./main-D2F9KyVn.js";import{B as b}from"./button-CWHKuk29.js";import{u as C}from"./useAppSelector-w1_Hwefa.js";import{c as P,R as Q,A as ee,P as te,C as ne,I as oe,G as ae,L as re,a as se,d as ie,e as ce,b as ue,S as de,f as le,g as pe,h as xe}from"./index-BxCOCFxf.js";import{s as me,a as fe,c as ve,d as he}from"./apiTestSelectors-BI3myQ76.js";import{I as Ce}from"./input-DF_cKhzX.js";import{u as ge}from"./useApiTestService-CYwA4qSs.js";import{u as Me}from"./use-show-toast-DrGlGHvE.js";import{C as _e}from"./chevron-right-ChdOP0Qm.js";import{c as S}from"./createLucideIcon-CJaTXc0n.js";import"./index-Ct5U2_LI.js";import"./index-BL6WQeaZ.js";import"./useRequest-7n1J7GxQ.js";import"./useAuthState-DAnHfUPx.js";import"./BaseEntity-DGhPHkWu.js";import"./serviceHandler-BlQljMi1.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Te=S("file-text",Re);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],be=S("folder",Ne);var R="ContextMenu",[je,gt]=H(R,[P]),i=P(),[we,y]=je(R),E=e=>{const{__scopeContextMenu:o,children:a,onOpenChange:t,dir:r,modal:p=!0}=e,[l,d]=s.useState(!1),v=i(o),m=F(t),c=s.useCallback(f=>{d(f),m(f)},[m]);return n.jsx(we,{scope:o,open:l,onOpenChange:c,modal:p,children:n.jsx(Q,{...v,dir:r,open:l,onOpenChange:c,modal:p,children:a})})};E.displayName=R;var D="ContextMenuTrigger",O=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,disabled:t=!1,...r}=e,p=y(D,a),l=i(a),d=s.useRef({x:0,y:0}),v=s.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...d.current})}),m=s.useRef(0),c=s.useCallback(()=>window.clearTimeout(m.current),[]),f=x=>{d.current={x:x.clientX,y:x.clientY},p.onOpenChange(!0)};return s.useEffect(()=>c,[c]),s.useEffect(()=>void(t&&c()),[t,c]),n.jsxs(n.Fragment,{children:[n.jsx(ee,{...l,virtualRef:v}),n.jsx(q.span,{"data-state":p.open?"open":"closed","data-disabled":t?"":void 0,...r,ref:o,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:t?e.onContextMenu:h(e.onContextMenu,x=>{c(),f(x),x.preventDefault()}),onPointerDown:t?e.onPointerDown:h(e.onPointerDown,g(x=>{c(),m.current=window.setTimeout(()=>f(x),700)})),onPointerMove:t?e.onPointerMove:h(e.onPointerMove,g(c)),onPointerCancel:t?e.onPointerCancel:h(e.onPointerCancel,g(c)),onPointerUp:t?e.onPointerUp:h(e.onPointerUp,g(c))})]})});O.displayName=D;var Ae="ContextMenuPortal",U=e=>{const{__scopeContextMenu:o,...a}=e,t=i(o);return n.jsx(te,{...t,...a})};U.displayName=Ae;var k="ContextMenuContent",G=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=y(k,a),p=i(a),l=s.useRef(!1);return n.jsx(ne,{...p,...t,ref:o,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:d=>{e.onCloseAutoFocus?.(d),!d.defaultPrevented&&l.current&&d.preventDefault(),l.current=!1},onInteractOutside:d=>{e.onInteractOutside?.(d),!d.defaultPrevented&&!r.modal&&(l.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});G.displayName=k;var Ie="ContextMenuGroup",Pe=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(ae,{...r,...t,ref:o})});Pe.displayName=Ie;var Se="ContextMenuLabel",ye=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(re,{...r,...t,ref:o})});ye.displayName=Se;var Ee="ContextMenuItem",L=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(oe,{...r,...t,ref:o})});L.displayName=Ee;var De="ContextMenuCheckboxItem",Oe=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(se,{...r,...t,ref:o})});Oe.displayName=De;var Ue="ContextMenuRadioGroup",ke=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(ie,{...r,...t,ref:o})});ke.displayName=Ue;var Ge="ContextMenuRadioItem",Le=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(ce,{...r,...t,ref:o})});Le.displayName=Ge;var $e="ContextMenuItemIndicator",ze=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(ue,{...r,...t,ref:o})});ze.displayName=$e;var Be="ContextMenuSeparator",Fe=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(de,{...r,...t,ref:o})});Fe.displayName=Be;var He="ContextMenuArrow",qe=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(le,{...r,...t,ref:o})});qe.displayName=He;var Ve="ContextMenuSubTrigger",Xe=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(pe,{...r,...t,ref:o})});Xe.displayName=Ve;var Ke="ContextMenuSubContent",We=s.forwardRef((e,o)=>{const{__scopeContextMenu:a,...t}=e,r=i(a);return n.jsx(xe,{...r,...t,ref:o,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});We.displayName=Ke;function g(e){return o=>o.pointerType!=="mouse"?e(o):void 0}var Ze=E,Ye=O,Je=U,Qe=G,et=L;function j({...e}){return n.jsx(Ze,{"data-slot":"context-menu",...e})}function w({...e}){return n.jsx(Ye,{"data-slot":"context-menu-trigger",...e})}function A({className:e,...o}){return n.jsx(Je,{children:n.jsx(Qe,{"data-slot":"context-menu-content",className:I("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...o})})}function M({className:e,inset:o,variant:a="default",...t}){return n.jsx(et,{"data-slot":"context-menu-item","data-inset":o,"data-variant":a,className:I("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}const tt=e=>e.clientDatabase.clientDatabase;function nt({node:e,level:o=0}){const{id:a}=V().props,t=X(),r=o*8,p=C(me),l=C(fe),d=C(ve),v=C(he),m=C(tt),c=Me(),f=d.includes(e.UUID),x=p?.UUID===e.UUID,{createApiTest:$}=ge(),T=u=>{t(W(u))},z=u=>{t(Z(u))},B=async()=>{try{if(l&&m){const u={...l,project:a,transmission:"formData",clientDatabase:m.UUID,seq:1};await $(u,m.refreshToken,{onSuccess:N=>{t(_(null)),t(Y(N)),t(J(N))}})}}catch(u){console.error(u),c("Error","Unexpected error","error")}};return e.isFolder?n.jsxs("div",{children:[n.jsxs(j,{children:[n.jsx(w,{children:n.jsxs(b,{variant:"ghost",onClick:()=>{z(e.UUID),T(e)},className:`w-full flex items-center justify-start gap-1 ${x?"bg-accent":""}`,style:{paddingLeft:`${r}px`},children:[n.jsx(_e,{className:`h-4 w-4 transform transition-transform duration-300 ${f?"rotate-90":""}`}),n.jsx(be,{size:16}),n.jsx("span",{className:"text-sm",children:e.testName})]})}),n.jsxs(A,{children:[n.jsx(M,{children:"Rename"}),n.jsx(M,{children:"Remove"})]})]}),f&&e.apiTests?.map(u=>n.jsx(nt,{node:u,level:o+1},u.UUID))]}):n.jsx("div",{className:"flex items-center gap-1 w-full",style:{paddingLeft:`${r+8}px`},children:n.jsxs(j,{children:[n.jsx(w,{className:"w-full",children:v==="rename"&&p?.UUID===e.UUID?n.jsx(Ce,{defaultValue:e.testName,autoFocus:!0,onChange:u=>{t(_(u.target.value))},onBlur:()=>t(_(null)),onKeyDown:u=>{u.key==="Enter"&&B()}}):n.jsxs(b,{variant:"ghost",onClick:()=>T(e),className:`w-full flex items-center justify-start gap-1 ${x?"bg-accent":""}`,children:[n.jsx(Te,{size:16}),e.testName]})}),n.jsxs(A,{children:[n.jsx(M,{className:"cursor-pointer",onClick:()=>t(K({action:"rename",viewModel:e,dto:e.apiDTO})),children:"Rename"}),n.jsx(M,{className:"cursor-pointer",children:"Remove"})]})]})})}export{nt as default};
