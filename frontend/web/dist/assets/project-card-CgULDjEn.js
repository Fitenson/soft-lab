import{u as f,R as x,a as D,h as b,j as e,i as h,r as C}from"./main-Cw-LF5Po.js";import{C as j,a as S,b as N,d as w,e as U}from"./card-DJ3saFMx.js";import{B as i}from"./button-BNQ0grnT.js";import{D as g,a as I,b as T,c as k}from"./dropdown-menu-vsMom4BC.js";import{C as v}from"./ClientDatabaseViewModel-CZz8IN5P.js";import{u as E}from"./useClientDatabaseService-BG5_-_GE.js";import{u as l}from"./useAppSelector-BnSkguJi.js";import{u as y}from"./use-show-toast-vwMQS-j3.js";import"./index-DhJZCeP9.js";import"./index-DkHgwUuD.js";import"./index-CZY01lQM.js";import"./index-CJlVv5uj.js";import"./check-jfxtOZGn.js";import"./createLucideIcon-aoolMLwC.js";import"./serviceHandler-BlQljMi1.js";import"./useRequest-BDW1RNlz.js";import"./useAuthState-B7H54Bvq.js";import"./BaseEntity-DGhPHkWu.js";import"./ClientDatabaseTableViewModel-CWID7VbN.js";function Z({projectViewModel:s}){const d=f(),[t,n]=x.useState(),{connectClientDatabase:m}=E(),c=l(a=>a.clientDatabase.clientDatabase),[o]=D.useState(()=>c?new v(c):null),r=y(),u=l(b),p=async()=>{o?.UUID!=t?.UUID?await m(t?.UUID??"",{onSuccess:a=>{d(h(a.dto)),r("Success","Successfully connecting user to database","success")},onError:()=>{r("Error","Failed to connect user to database","error")}}):(o&&n(o),r("Success","Successfully connecting user to database","success")),C.visit(`/backend/api-test/dashboard?id=${s?.UUID}`)};return e.jsxs(j,{className:"w-full h-full flex flex-col",children:[e.jsx(S,{children:e.jsx(N,{className:"text-center font-semibold",children:s.projectCode})}),e.jsxs(w,{className:"flex flex-col gap-2 flex-1 mb-2",children:[e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Project: "}),e.jsx("span",{className:"font-normal",children:s.projectName})]}),e.jsxs(g,{children:[e.jsx(I,{asChild:!0,children:e.jsx(i,{variant:"outline",children:t?t.databaseName:"Select Database"})}),e.jsx(T,{children:s.clientDatabases.map(a=>e.jsx(k,{onClick:()=>n(a),children:a.databaseName},a.UUID))})]})]}),e.jsx(U,{className:"flex flex-col w-full mt-auto",children:e.jsx(i,{className:"w-full",disabled:u,onClick:p,children:"Connect"})})]})}export{Z as default};
