import{e as D,u as N,a as v,j as s,f as A,g as d,h as S,t as g,i as F,k as U}from"./main-ClN3zn8I.js";import{I}from"./input-CbrBmGdE.js";import{F as C,a as w,b as E,c as k,d as y}from"./form-e9iT9oDo.js";import{T as O,a as B,b as m,c as n}from"./tabs-DsuWRU5W.js";import{u as L,A as f}from"./useApiTestForm-hSOmSbgO.js";import R from"./documentation-tab-BkpoNOga.js";import V from"./data-tab-BVoHlvlK.js";import M from"./scenario-tab-DyNio18O.js";import{u as x}from"./useAppSelector-B2O_wUyw.js";import{B as P}from"./button-DbIVSVml.js";import{s as q}from"./apiTestSelectors-BJyltacD.js";import{u as z}from"./useApiTestService-1orpwfsT.js";import{s as G}from"./clientDatabaseSelectors-Cw1rL9yb.js";import{u as H}from"./use-show-toast-BuzWkDcH.js";import"./zod-BHD6nHr3.js";import"./schemas-IYWG8WH7.js";import"./index-I5lzUpao.js";import"./index-Cw3nxk_O.js";import"./ApiTestViewModel-DgxPnehm.js";import"./textarea-BRH3qg5k.js";import"./select-qjp0StTX.js";import"./index-DOlDELx8.js";import"./createLucideIcon-C6axjnaa.js";import"./check-CgW1aqIB.js";import"./useRequest-B8huhoa7.js";import"./useAuthState-B0gQ_8ai.js";import"./BaseEntity-DGhPHkWu.js";import"./serviceHandler-BlQljMi1.js";function bs(){const{id:T}=D().props,a=x(q),c=x(G),{form:t}=L({apiTestDTO:a}),e=N(),{createApiTest:j}=z(),h=H();v.useEffect(()=>{t.setValue("testName",a?.testName??""),t.setValue("transmission",a?.transmission??"formData")},[a,t]);const b=async o=>{const r=c?.password,l=c?.UUID,p=[a?.UUID].filter(i=>i!==void 0);if(l&&r){const i={...o,project:T,clientDatabase:l};await j(i,r,{onSuccess:async u=>{e(d(p)),e(S(u)),e(g({action:null})),e(F({UUID:"",newName:""})),e(U(u))}})}else e(d(p)),h("Error","Missing database token","error")};return s.jsx("div",{className:"h-full w-full",children:s.jsx(C,{...t,children:s.jsxs("form",{onSubmit:t.handleSubmit(b),children:[s.jsxs("div",{className:"flex items-end gap-2 m-2",children:[s.jsx(w,{name:f.testName.name,render:({field:o})=>s.jsxs(E,{className:"flex-1",children:[s.jsx(k,{children:f.testName.label}),s.jsx(y,{children:s.jsx(I,{...o,onChange:r=>{o.onChange(r),e(A(r.target.value))}})})]})}),s.jsx(P,{className:"p-2 px-6",children:"Save"})]}),s.jsxs(O,{className:"w-full m-2",defaultValue:"documentation",children:[s.jsxs(B,{className:"w-full flex justify-start",children:[s.jsx(m,{className:"cursor-pointer",value:"documentation",children:"Documentation"}),s.jsx(m,{className:"cursor-pointer",value:"data",children:"Data"}),s.jsx(m,{className:"cursor-pointer",value:"scenario",children:"Scenario"})]}),s.jsx(n,{value:"documentation",className:"m-2",children:s.jsx(R,{})}),s.jsx(n,{value:"data",className:"m-2",children:s.jsx(V,{})}),s.jsx(n,{value:"scenario",className:"m-2",children:s.jsx(M,{})})]})]})})})}export{bs as default};
