import{j as e,a as h,u as R,r as N,g as k,h as z,i as y}from"./main-D-XDqi-d.js";import{f as p,u as v,T,g as M,a as V,b as D}from"./top-action-bar-Ba0GgMry.js";import{u as w}from"./useAppSelector-DKEg4ob4.js";import{U as I}from"./UserViewModel-CyUmostW.js";import{a as r}from"./utils-_LUnSz7l.js";import{I as A}from"./input-CGICFLt7.js";import"./button-YMcYhrCk.js";import"./index-BdFKHKo2.js";import"./index-CSn8yZm3.js";import"./createLucideIcon-zBqVxRn8.js";function F({className:t,...l}){return e.jsx("div",{"data-slot":"skeleton",className:r("bg-accent animate-pulse rounded-md",t),...l})}function U({className:t,...l}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:r("w-full caption-bottom text-sm",t),...l})})}function H({className:t,...l}){return e.jsx("thead",{"data-slot":"table-header",className:r("[&_tr]:border-b",t),...l})}function L({className:t,...l}){return e.jsx("tbody",{"data-slot":"table-body",className:r("[&_tr:last-child]:border-0",t),...l})}function i({className:t,...l}){return e.jsx("tr",{"data-slot":"table-row",className:r("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...l})}function $({className:t,...l}){return e.jsx("th",{"data-slot":"table-head",className:r("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...l})}function j({className:t,...l}){return e.jsx("td",{"data-slot":"table-cell",className:r("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...l})}function _({table:t,isLoading:l,error:d,onSelectRow:u}){return console.log(d),e.jsxs(U,{className:"border rounded-lg border-accent dark:border-accent",children:[e.jsx(H,{children:t.getHeaderGroups().map(a=>e.jsx(i,{className:"border-b border-accent dark:border-accent",children:a.headers.map(o=>e.jsxs($,{className:"m-0 p-0 border-r border-accent dark:border-accent last:border-r-0",style:{width:o.getSize()},children:[o.isPlaceholder?null:p(o.column.columnDef.header,o.getContext()),o.column.getCanFilter()&&e.jsx(A,{value:o.column.getFilterValue()??"",onChange:c=>o.column.setFilterValue(c.target.value),className:"w-full mt-1 h-8 "}),o.column.getCanResize()&&e.jsx("div",{onMouseDown:o.getResizeHandler(),onTouchStart:o.getResizeHandler(),className:`absolute right-0 top-0 h-full w-1 cursor-col-resize select-none
                                            ${o.column.getIsResizing()?"bg-blue-500":"bg-transparent hover:bg-gray-400"}`})]},o.id))},a.id))}),e.jsx(L,{children:t.getRowModel().rows?.length?t.getRowModel().rows.map(a=>e.jsx(i,{className:`cursor-pointer p-2 border border-accent dark:border-accent ${a.getIsSelected(),"text-foreground dark:text-foreground"}`,onClick:()=>a.toggleSelected(),onDoubleClick:()=>u(a),"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(o=>e.jsx(j,{className:"p-2.5 border-2 border-accent dark:border-accent",children:p(o.column.columnDef.cell,o.getContext())},o.id))},a.id)):l?Array.from({length:5}).map((a,o)=>e.jsx(i,{children:t.getAllLeafColumns().map(c=>e.jsx("td",{className:"px-2 py-2",children:e.jsx(F,{className:"h-4 w-full rounded-2xl p-4 m-1 gap-2"})},c.id))},`skeleton-${o}`)):e.jsx(i,{children:e.jsx(j,{colSpan:t.getAllLeafColumns().length,className:"h-24 text-center",children:e.jsx("h3",{children:"No results"})})})})]})}function X({columns:t,data:l,onRefresh:d}){const[u,a]=h.useState({}),[o,c]=h.useState({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),m=R(),S=w(n=>n.loading),{rowSelection:g,sorting:b,columnVisibility:f}=w(n=>n.userDataTable),x=v({data:l,columns:t,columnResizeMode:"onChange",enableRowSelection:!0,enableMultiRowSelection:!0,enableColumnFilters:!0,onColumnSizingChange:a,onColumnSizingInfoChange:c,onRowSelectionChange:n=>{const s=typeof n=="function"?n(g):n;m(y(s))},onSortingChange:n=>{const s=typeof n=="function"?n(b):n;m(z(s))},onColumnVisibilityChange:n=>{const s=typeof n=="function"?n(f):n;m(k(s))},getCoreRowModel:D(),getFilteredRowModel:V(),getSortedRowModel:M(),state:{rowSelection:g,sorting:b,columnVisibility:f,columnSizing:u,columnSizingInfo:o}}),C=n=>{const s=new I(n.original);N.visit(`/user/${s.UUID}`)};return e.jsx("main",{className:"w-full",children:e.jsxs("div",{className:"overflow-hidden rounded-md border",children:[e.jsx("div",{className:"w-full",children:e.jsx(T,{createAction:{to:"/user/create"},deleteAction:{action:()=>"deleteUser"},refreshAction:{action:d},table:x})}),e.jsx(_,{table:x,isLoading:S.global,onSelectRow:C})]})})}export{X as default};
