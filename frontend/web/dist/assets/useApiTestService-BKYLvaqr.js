import{u as w}from"./useRequest-BEMQcVdI.js";import{a1 as j,C as g}from"./main-BtiO4frp.js";import{B as b}from"./BaseEntity-DGhPHkWu.js";import{h as u}from"./serviceHandler-BlQljMi1.js";class D{_UUID;_parentApiTest;_clientDatabase;_project;_isFolder;_testName;_transmission;_description;_moreDescription;_apiTests;_apiDTO;constructor(t){this._UUID=t.UUID??"",this._parentApiTest=t.parentApiTest??"",this._clientDatabase=t.clientDatabase??"",this._project=t.project??"",this._testName=t.testName??"",this._transmission=t.transmission??"",this._isFolder=Number(t.isFolder??0),this._description=t.description??"",this._moreDescription=t.moreDescription??"",this._apiTests=(t.apiTests??[]).map(a=>new D(a)),this._apiDTO=t}get UUID(){return this._UUID}get parentApiTest(){return this._parentApiTest}get clientDatabase(){return this._clientDatabase}get project(){return this._project}get testName(){return this._testName}get transmission(){return this._transmission}get description(){return this._description}get moreDescription(){return this._moreDescription}get isFolder(){return this._isFolder}get apiTests(){return this._apiTests}get apiDTO(){return this._apiDTO}}const y=["UUID","parentApiTest","clientDatabase","project","testName","transmission","description","isFolder","moreDescription"];function A(r,t){return j(r,y,t,"apiTest")}class T extends b{_UUID;_parentApiTest;_clientDatabase;_project;_testName;_isFolder;_transmission;_description;_moreDescription;_apiTests;constructor(t){super(t),this._UUID=t.UUID??"",this._parentApiTest=t.parentApiTest??"",this._clientDatabase=t.clientDatabase??"",this._project=t.project??"",this._testName=t.testName??"",this._isFolder=Number(t.isFolder??0),this._transmission=t.transmission??"",this._description=t.description??"",this._moreDescription=t.moreDescription??"",this._apiTests=(t.apiTests??[]).map(a=>new T(a))}asViewModel(){return new D(this.asDto())}get UUID(){return this._UUID}set UUID(t){this._UUID=t}get parentApiTest(){return this._parentApiTest}set parentApiTest(t){this._parentApiTest=t}get clientDatabase(){return this._clientDatabase}set clientDatabase(t){this._clientDatabase=t}get project(){return this._project}set project(t){this._project=t}get testName(){return this._testName}set testName(t){this._testName=t}get transmission(){return this._transmission}set transmission(t){this._transmission=t}get description(){return this._description}set description(t){this._description=t}get moreDescription(){return this._moreDescription}set moreDescription(t){this._moreDescription=t}get isFolder(){return this._isFolder}set isFolder(t){this._isFolder=t}get apiTests(){return this._apiTests}set apiTests(t){this._apiTests=t}}const I=()=>{const{request:r}=w();return{listProjects:async()=>r({url:"/api-test/list-projects",method:"GET"}),indexApiTest:async()=>r({url:"/api-test/index",method:"GET"}),createApiTest:async(c,o)=>{const _=c.asDto(),h=A(_,new FormData),e=(await r({url:"/api-test/create",method:"POST",data:h,headers:{"X-Client-Database-Token":o}})).apiTest;return new T(e)},updateApiTest:async c=>{const o=c.asDto(),_=A(o,new FormData),s=(await r({url:`/api-test/update?id=${o.UUID}`,method:"POST",data:_})).apiTest;return new T(s)},removeApiTest:async c=>{const o=new FormData;return c.forEach(_=>{o.append("UUIDs[]",_)}),await r({url:"/api-test/remove",method:"POST",data:o})}}};class N{_UUID;_projectCode;_projectName;_clientDatabases;constructor(t,a){this._UUID=t?.UUID??"",this._projectCode=t?.projectCode??"",this._projectName=t?.projectName??"",this._clientDatabases=a}get UUID(){return this._UUID}get projectCode(){return this._projectCode}get projectName(){return this._projectName}get clientDatabases(){return this._clientDatabases}}const M=()=>{const{listProjects:r,indexApiTest:t,createApiTest:a,updateApiTest:l,removeApiTest:d}=I();return{listProjects:async s=>u(async()=>{const e=await r(),n=e.rows.map(i=>{const p=i.clientDatabases.map(m=>new g(m));return new N(i,p)});return{...e,rows:n}},s),indexApiTest:async s=>u(async()=>{const e=await t(),n=e.rows.map(i=>new D(i));return{...e,rows:n}},s),createApiTest:async(s,e,n)=>{let i=new T(s);return i=await u(async()=>a(i,e),{onSuccess:p=>{const m=p.asViewModel();n?.onSuccess?.(m)},onError:p=>{n?.onError?.(p)}}),i.asViewModel()},updateApiTest:async(s,e)=>{let n=new T(s);return n=await u(async()=>l(n),{onSuccess:i=>{const p=i.asViewModel();e?.onSuccess?.(p)},onError:i=>{e?.onError?.(i)}}),n.asViewModel()},removeApiTest:async(s,e)=>await u(async()=>d(s),e)}};export{D as A,M as u};
