import{a as u,l as m,u as f,m as i,n as c,o as g,r as w}from"./main-rRv66LRu.js";import{u as b}from"./useAppSelector-C3gUEf_H.js";import{u as x}from"./useAuthState-9ObYT1fq.js";const S=()=>{const{authViewModel:s}=x(),a=u.useMemo(()=>m.create({baseURL:"http://softlab-backend.test/backend",withCredentials:!0}),[]),d=b(t=>t.loading.global),l=f(),[h,p]=u.useState(null);return{isLoading:d,error:h,request:async t=>{const r=t?.withLoading!==!1;let o={};if(r&&i.dispatch(c(!0)),s){const e=`${s.username}:${s.password}`;o={Authorization:`Basic ${btoa(e)}`}}try{return(await a.request({url:t?.url,method:t?.method,data:t?.data,...t?.config,headers:{"Content-Type":"multipart/form-data",...o}})).data}catch(e){const n=e;throw n.response&&n.response.status===401&&(l(g()),w.visit("/login")),p(e),e}finally{r&&i.dispatch(c(!1))}},axiosInstance:a}};export{S as u};
