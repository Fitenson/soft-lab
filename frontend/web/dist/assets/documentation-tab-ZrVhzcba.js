import{a as u,j as s}from"./main-Bla8sumr.js";import{a as f,b as T,c as b,d as j}from"./form-Caiiz5JM.js";import{u as h}from"./index.esm-DF6NKSUX.js";import{a as g}from"./zod-DbYnedAK.js";import{A as D}from"./ApiTestViewModel-DcD3VQyO.js";import{A as a}from"./ApiTestFormField-CgXwgq-w.js";import{A as m}from"./ApiTestDataFormField-CINPOeAs.js";import{o as A,n as c,s as o,b as w}from"./schemas-D95ZC4Tg.js";import{T as F}from"./textarea-CB1B43bv.js";import{u as v}from"./useAppSelector-CVHfaqsw.js";import{s as y}from"./apiTestSelectors-BJyltacD.js";const N=A({UUID:o().optional(),enabled:c().optional(),key:o().max(m.key.max,{error:m.key.maxError}).optional(),value:o().max(m.value.max,{error:m.value.maxError}).optional(),description:o().max(m.description.max,{error:m.description.maxError}).optional(),fieldType:o().optional(),isNew:c().optional()}),H=A({testName:o().max(a.testName.max,{error:a.testName.maxError}),parentApiTest:o().optional(),clientDatabase:o(),project:o(),isFolder:c(),transmission:o(),description:o().max(a.description.max,{error:a.description.maxError}).optional(),moreDescription:o().max(a.moreDescription.max,{error:a.moreDescription.maxError}).optional()}).extend({apiTestData:w(N).default([]).optional()}),S=({apiTestDTO:i})=>{const[r,l]=u.useState(()=>i?new D(i):null),t=h({resolver:g(H),defaultValues:{parentApiTest:r?.parentApiTest??"",clientDatabase:r?.clientDatabase??"",project:r?.project??"",testName:r?.testName??"",isFolder:r?.isFolder??0,transmission:r?.transmission??"",description:r?.description??"",moreDescription:r?.moreDescription??"",apiTestData:r?.apiTestHasDatas?r?.apiTestHasDatas.map(e=>e.dto):[]}});return u.useEffect(()=>{if(i){const e=new D(i);l(e),t.reset({parentApiTest:e.parentApiTest??"",clientDatabase:e.clientDatabase??"",project:e.project??"",testName:e.testName??"",isFolder:e.isFolder??0,transmission:e.transmission??"",description:e.description??"",moreDescription:e.moreDescription??"",apiTestData:e.apiTestHasDatas?e?.apiTestHasDatas.map(p=>p.dto):[]})}},[i,t]),{form:t,setFormError:(e,p)=>{const{setToastError:E}=p||{},n=e?.response?.data?.errors??{};typeof n=="string"?E?.(n):n&&Object.keys(n).length>0&&Object.keys(n).forEach(d=>{const x=d.replace(/^apiTest\./,"");x in t.getValues()&&t.setError(x,{type:"server",message:n[d][0]??"Invalid value"})})},apiTestViewModel:r,setApiTestViewModel:l}};function V(){const i=v(t=>t.loading.global),r=v(y),{form:l}=S({apiTestDTO:r});return s.jsxs("div",{className:"w-full",children:[s.jsx(f,{control:l.control,name:a.description.name,render:({field:t})=>s.jsxs(T,{children:[s.jsx(b,{children:a.description.label}),s.jsx(j,{children:s.jsx(F,{...t,value:t.value??"",disabled:i,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})}),s.jsx(f,{control:l.control,name:a.moreDescription.name,render:({field:t})=>s.jsxs(T,{children:[s.jsx(b,{children:a.moreDescription.label}),s.jsx(j,{children:s.jsx(F,{...t,value:t.value??"",disabled:i,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})})]})}const B=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{V as D,B as d,S as u};
