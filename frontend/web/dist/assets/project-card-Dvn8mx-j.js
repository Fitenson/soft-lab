import{u as f,R as x,a as D,b,j as e,d as h,r as C}from"./main-D4bI6BKa.js";import{C as j,a as S,b as N,d as w,e as U}from"./card-CLLMU5Bf.js";import{B as l}from"./button-BKnOxFCw.js";import{D as g,a as I,b as T,c as k}from"./dropdown-menu-DRl2BnUw.js";import{C as v}from"./ClientDatabaseViewModel-CZz8IN5P.js";import{u as E}from"./useClientDatabaseService-D-7ZZtXP.js";import{u as i}from"./useAppSelector-DxgkrSSa.js";import{u as y}from"./use-show-toast-CjZCszxr.js";import"./index-X2ld5qWc.js";import"./index-EDnzw9Sw.js";import"./index-6_HBpJ78.js";import"./index-j-GxORq2.js";import"./check-CNXSdWW9.js";import"./createLucideIcon-C98CFg3S.js";import"./serviceHandler-BlQljMi1.js";import"./useRequest-CO_Ng5p6.js";import"./useAuthState-DfK9lhK3.js";import"./BaseEntity-DGhPHkWu.js";function Y({projectViewModel:s}){const d=f(),[t,n]=x.useState(),{connectClientDatabase:m}=E(),c=i(a=>a.clientDatabase.clientDatabase),[o]=D.useState(()=>c?new v(c):null),r=y(),u=i(b),p=async()=>{o?.UUID!=t?.UUID?await m(t?.UUID??"",{onSuccess:a=>{d(h(a.dto)),r("Success","Successfully connecting user to database","success")},onError:()=>{r("Error","Failed to connect user to database","error")}}):(o&&n(o),r("Success","Successfully connecting user to database","success")),C.visit(`/backend/api-test/dashboard?id=${s?.UUID}`)};return e.jsxs(j,{className:"w-full h-full flex flex-col",children:[e.jsx(S,{children:e.jsx(N,{className:"text-center font-semibold",children:s.projectCode})}),e.jsxs(w,{className:"flex flex-col gap-2 flex-1 mb-2",children:[e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Project: "}),e.jsx("span",{className:"font-normal",children:s.projectName})]}),e.jsxs(g,{children:[e.jsx(I,{asChild:!0,children:e.jsx(l,{variant:"outline",children:t?t.databaseName:"Select Database"})}),e.jsx(T,{children:s.clientDatabases.map(a=>e.jsx(k,{onClick:()=>n(a),children:a.databaseName},a.UUID))})]})]}),e.jsx(U,{className:"flex flex-col w-full mt-auto",children:e.jsx(l,{className:"w-full",disabled:u,onClick:p,children:"Connect"})})]})}export{Y as default};
