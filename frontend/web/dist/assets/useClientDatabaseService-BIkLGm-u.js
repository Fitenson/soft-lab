import{j as a,g as d,J as x}from"./main-Dyet6hp8.js";import{R as v,C as j,a as w,T as y,b as U,D as N,P as T,O as S}from"./index-CTnjfjH0.js";import{X as I}from"./index-CijKulxP.js";import{h}from"./serviceHandler-BlQljMi1.js";import{u as k}from"./useRequest-s0buVQB2.js";import{B as O}from"./BaseEntity-DGhPHkWu.js";class D{_UUID;_databaseName;_databaseSchema;_refreshToken;_host;_port;_username;_password;_project;_projectName;_valid;constructor(e){this._UUID=e.UUID??"",this._databaseName=e.databaseName??"",this._databaseSchema=e.databaseSchema??"",this._refreshToken=e.refreshToken??"",this._host=e.host??"",this._port=e.port??"",this._username=e.username??"",this._password=e.password??"",this._project=e.project??"",this._projectName=e.projectName??"",this._valid=e.valid??!0}get UUID(){return this._UUID}get databaseName(){return this._databaseName}get databaseSchema(){return this._databaseSchema}get refreshToken(){return this._refreshToken}get host(){return this._host}get port(){return this._port}get username(){return this._username}get password(){return this._password}get project(){return this._project}get projectName(){return this._projectName}get valid(){return this._valid}}function $({...t}){return a.jsx(v,{"data-slot":"dialog",...t})}function H({...t}){return a.jsx(y,{"data-slot":"dialog-trigger",...t})}function R({...t}){return a.jsx(T,{"data-slot":"dialog-portal",...t})}function J({...t}){return a.jsx(w,{"data-slot":"dialog-close",...t})}function M({className:t,...e}){return a.jsx(S,{"data-slot":"dialog-overlay",className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function K({className:t,children:e,showCloseButton:m=!0,...p}){return a.jsxs(R,{"data-slot":"dialog-portal",children:[a.jsx(M,{}),a.jsxs(j,{"data-slot":"dialog-content",className:d("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...p,children:[e,m&&a.jsxs(w,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[a.jsx(I,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function X({className:t,...e}){return a.jsx("div",{"data-slot":"dialog-header",className:d("flex flex-col gap-2 text-center sm:text-left",t),...e})}function A({className:t,...e}){return a.jsx("div",{"data-slot":"dialog-footer",className:d("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function L({className:t,...e}){return a.jsx(U,{"data-slot":"dialog-title",className:d("text-lg leading-none font-semibold",t),...e})}function Q({className:t,...e}){return a.jsx(N,{"data-slot":"dialog-description",className:d("text-muted-foreground text-sm",t),...e})}const E=["UUID","host","port","databaseName","databaseSchema","username","password","project","valid"];function f(t,e){return x(t,E,e,"clientDatabase")}class b extends O{_UUID;_databaseName;_databaseSchema;_refreshToken;_host;_port;_username;_password;_project;_valid;constructor(e){super(e),this._UUID=e.UUID??"",this._databaseName=e.databaseName??"",this._databaseSchema=e.databaseSchema??"",this._refreshToken=e.refreshToken??"",this._host=e.host??"",this._port=e.port??"",this._username=e.username??"",this._password=e.password??"",this._project=e.project??"",this._valid=e.valid??!0}asViewModel(){return new D(this.asDto())}get UUID(){return this._UUID}set UUID(e){this._UUID=e}get databaseName(){return this._databaseName}set databaseName(e){this._databaseName=e}get databaseSchema(){return this._databaseSchema}set databaseSchema(e){this._databaseSchema=e}get refreshToken(){return this._refreshToken}set refreshToken(e){this._refreshToken=e}get host(){return this._host}set host(e){this._host=e}get port(){return this._port}set port(e){this._port=e}get username(){return this._username}set username(e){this._username=e}get password(){return this._password}set password(e){this._password=e}get project(){return this._project}set project(e){this._project=e}get valid(){return this._valid}set valid(e){this._valid=e}}const z=()=>{const{request:t}=k();return{indexClientDatabase:async()=>await t({url:"client-database/index",method:"GET"}),createClientDatabase:async r=>{const i=r.asDto(),l=f(i,new FormData),s=(await t({url:"/client-database/create",method:"POST",data:l})).clientDatabase;return new b(s)},updateClientDatabase:async r=>{const i=r.asDto(),l=f(i,new FormData),s=(await t({url:`/client-database/update?id=${i.UUID}`,method:"POST",data:l})).clientDatabase;return new b(s)},removeClientDatabase:async r=>{const i=new FormData;return r.forEach(l=>{i.append("UUIDs[]",l)}),await t({url:"/client-database/remove",method:"POST",data:i})},connectClientDatabase:async r=>await t({url:`/client-database/connect?id=${r}`,method:"GET"})}},W=()=>{const{indexClientDatabase:t,createClientDatabase:e,updateClientDatabase:m,removeClientDatabase:p,connectClientDatabase:g}=z();return{indexClientDatabase:async s=>h(async()=>{const n=await t(),o=n.rows.map(c=>new D(c));return{...n,rows:o}},s),createClientDatabase:async(s,n)=>{let o=new b(s);return o=await h(async()=>e(o),{...n,onSuccess:c=>{const u=c.asViewModel();n?.onSuccess?.(u)}}),o.asViewModel()},updateClientDatabase:async(s,n)=>{let o=new b(s);return o=await h(async()=>m(o),{...n,onSuccess:c=>{const u=c.asViewModel();n?.onSuccess?.(u)}}),o.asViewModel()},removeClientDatabase:async(s,n)=>await h(async()=>p(s),n),connectClientDatabase:async(s,n)=>{const o=await h(async()=>g(s),{...n,onSuccess:c=>{const u=new D(c);n?.onSuccess?.(u)}});return new D(o)}}};export{D as C,$ as D,H as a,K as b,X as c,L as d,Q as e,A as f,J as g,W as u};
