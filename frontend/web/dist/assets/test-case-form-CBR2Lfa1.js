import{e as D,u as N,a as v,j as s,f as A,g as d,h as S,t as g,i as F,k as U}from"./main-maXX6MIv.js";import{I}from"./input-DJOcEpL0.js";import{F as C,a as w,b as E,c as k,d as y}from"./form-CraOmiw3.js";import{T as O,a as B,b as m,c as n}from"./tabs-CM8C70M2.js";import{u as L,A as f}from"./useApiTestForm-Dj5qWjC_.js";import R from"./documentation-tab-DI_zbE8x.js";import V from"./data-tab-DJsVNSoB.js";import M from"./scenario-tab-DsD5N9qs.js";import{u as x}from"./useAppSelector-BDsOrBdU.js";import{B as P}from"./button-CFCoH5WZ.js";import{s as q}from"./apiTestSelectors-BJyltacD.js";import{u as z}from"./useApiTestService-B6EQ0kc2.js";import{s as G}from"./clientDatabaseSelectors-Cw1rL9yb.js";import{u as H}from"./use-show-toast-6MQzSHQk.js";import"./zod-Fgwf6pfg.js";import"./schemas-IYWG8WH7.js";import"./index-DjkXQ_3A.js";import"./index-Dt7hMoU3.js";import"./ApiTestViewModel-DgxPnehm.js";import"./textarea-CW5nmPNn.js";import"./select-Cd0CAPQk.js";import"./index-BNiI1QJN.js";import"./createLucideIcon-CyjcsUJG.js";import"./check-D4FsD_5-.js";import"./useRequest-B-kRIH8L.js";import"./useAuthState-Hm25K-r3.js";import"./BaseEntity-DGhPHkWu.js";import"./serviceHandler-BlQljMi1.js";import"./ClientDatabaseViewModel-CZz8IN5P.js";function Ds(){const{id:T}=D().props,a=x(q),c=x(G),{form:t}=L({apiTestDTO:a}),e=N(),{createApiTest:j}=z(),h=H();v.useEffect(()=>{t.setValue("testName",a?.testName??""),t.setValue("transmission",a?.transmission??"formData")},[a,t]);const b=async o=>{const r=c?.password,l=c?.UUID,p=[a?.UUID].filter(i=>i!==void 0);if(l&&r){const i={...o,project:T,clientDatabase:l};await j(i,r,{onSuccess:async u=>{e(d(p)),e(S(u)),e(g({action:null})),e(F({UUID:"",newName:""})),e(U(u))}})}else e(d(p)),h("Error","Missing database token","error")};return s.jsx("div",{className:"h-full w-full",children:s.jsx(C,{...t,children:s.jsxs("form",{onSubmit:t.handleSubmit(b),children:[s.jsxs("div",{className:"flex items-end gap-2 m-2",children:[s.jsx(w,{name:f.testName.name,render:({field:o})=>s.jsxs(E,{className:"flex-1",children:[s.jsx(k,{children:f.testName.label}),s.jsx(y,{children:s.jsx(I,{...o,onChange:r=>{o.onChange(r),e(A(r.target.value))}})})]})}),s.jsx(P,{className:"p-2 px-6",children:"Save"})]}),s.jsxs(O,{className:"w-full m-2",defaultValue:"documentation",children:[s.jsxs(B,{className:"w-full flex justify-start",children:[s.jsx(m,{className:"cursor-pointer",value:"documentation",children:"Documentation"}),s.jsx(m,{className:"cursor-pointer",value:"data",children:"Data"}),s.jsx(m,{className:"cursor-pointer",value:"scenario",children:"Scenario"})]}),s.jsx(n,{value:"documentation",className:"m-2",children:s.jsx(R,{})}),s.jsx(n,{value:"data",className:"m-2",children:s.jsx(V,{})}),s.jsx(n,{value:"scenario",className:"m-2",children:s.jsx(M,{})})]})]})})})}export{Ds as default};
