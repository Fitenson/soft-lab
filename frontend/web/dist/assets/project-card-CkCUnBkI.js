import{u as f,R as x,a as D,h as b,j as e,i as h,r as C}from"./main-wTblVsq0.js";import{C as j,a as S,b as N,d as w,e as U}from"./card-BJMEPOKq.js";import{B as i}from"./button-BKtYD9UH.js";import{D as g,a as I,b as T,c as k}from"./dropdown-menu-DZ6sB29m.js";import{C as v}from"./ClientDatabaseViewModel-CZz8IN5P.js";import{u as E}from"./useClientDatabaseService-dSO1RnZE.js";import{u as l}from"./useAppSelector-BW6dmEz4.js";import{u as y}from"./use-show-toast-BSGP1Bhq.js";import"./index-DM4NgvGr.js";import"./index-BB0IBzWE.js";import"./index-B8kHX97E.js";import"./index-5KueQA_e.js";import"./check-CTufcYB2.js";import"./createLucideIcon-C5-kp_dk.js";import"./serviceHandler-BlQljMi1.js";import"./useRequest-BCnKN7Wn.js";import"./useAuthState-BElMWhPe.js";import"./BaseEntity-DGhPHkWu.js";import"./ClientDatabaseTableViewModel-CWID7VbN.js";function Z({projectViewModel:s}){const d=f(),[t,n]=x.useState(),{connectClientDatabase:m}=E(),c=l(a=>a.clientDatabase.clientDatabase),[o]=D.useState(()=>c?new v(c):null),r=y(),u=l(b),p=async()=>{o?.UUID!=t?.UUID?await m(t?.UUID??"",{onSuccess:a=>{d(h(a.dto)),r("Success","Successfully connecting user to database","success")},onError:()=>{r("Error","Failed to connect user to database","error")}}):(o&&n(o),r("Success","Successfully connecting user to database","success")),C.visit(`/backend/api-test/dashboard?id=${s?.UUID}`)};return e.jsxs(j,{className:"w-full h-full flex flex-col",children:[e.jsx(S,{children:e.jsx(N,{className:"text-center font-semibold",children:s.projectCode})}),e.jsxs(w,{className:"flex flex-col gap-2 flex-1 mb-2",children:[e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Project: "}),e.jsx("span",{className:"font-normal",children:s.projectName})]}),e.jsxs(g,{children:[e.jsx(I,{asChild:!0,children:e.jsx(i,{variant:"outline",children:t?t.databaseName:"Select Database"})}),e.jsx(T,{children:s.clientDatabases.map(a=>e.jsx(k,{onClick:()=>n(a),children:a.databaseName},a.UUID))})]})]}),e.jsx(U,{className:"flex flex-col w-full mt-auto",children:e.jsx(i,{className:"w-full",disabled:u,onClick:p,children:"Connect"})})]})}export{Z as default};
