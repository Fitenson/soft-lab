import{a as x,j as a}from"./main-CTqjNw_1.js";import{a as u,b as f,c as T,d as b}from"./form-DKo2ZhVV.js";import{u as E}from"./index.esm-yWvBp1Bw.js";import{a as h}from"./zod-CJSq7gEa.js";import{A as j}from"./ApiTestViewModel-DxDSkLkd.js";import{A as s}from"./ApiTestFormField-DjPdq18p.js";import{A as m}from"./ApiTestDataFormField-ByY0ei_5.js";import{o as v,s as o,n as g,b as w}from"./schemas-D95ZC4Tg.js";import{T as D}from"./textarea-Zi6EHO3B.js";import{u as F}from"./useAppSelector-CajmzB0M.js";import{s as y}from"./apiTestSelectors-BJyltacD.js";const N=v({enabled:o().optional(),key:o().max(m.key.max,{error:m.key.maxError}).optional(),value:o().max(m.value.max,{error:m.value.maxError}).optional(),description:o().max(m.description.max,{error:m.description.maxError}).optional(),fieldType:o().optional(),isNew:o().optional()}),S=v({testName:o().max(s.testName.max,{error:s.testName.maxError}),parentApiTest:o().optional(),clientDatabase:o(),project:o(),isFolder:g(),transmission:o(),description:o().max(s.description.max,{error:s.description.maxError}).optional(),moreDescription:o().max(s.moreDescription.max,{error:s.moreDescription.maxError}).optional()}).extend({apiTestData:w(N).default([]).optional()}),V=({apiTestDTO:i})=>{const[r,l]=x.useState(()=>i?new j(i):null),t=E({resolver:h(S),defaultValues:{parentApiTest:r?.parentApiTest??"",clientDatabase:r?.clientDatabase??"",project:r?.project??"",testName:r?.testName??"",isFolder:r?.isFolder??0,transmission:r?.transmission??"",description:r?.description??"",moreDescription:r?.moreDescription??"",apiTestData:r?.apiTestData?r?.apiTestData.map(e=>e.dto):[]}});return x.useEffect(()=>{if(i){const e=new j(i);l(e),t.reset({parentApiTest:e.parentApiTest??"",clientDatabase:e.clientDatabase??"",project:e.project??"",testName:e.testName??"",isFolder:e.isFolder??0,transmission:e.transmission??"",description:e.description??"",moreDescription:e.moreDescription??"",apiTestData:e.apiTestData?e?.apiTestData.map(p=>p.dto):[]})}},[i,t]),{form:t,setFormError:(e,p)=>{const{setToastError:A}=p||{},n=e?.response?.data?.errors??{};typeof n=="string"?A?.(n):n&&Object.keys(n).length>0&&Object.keys(n).forEach(c=>{const d=c.replace(/^apiTest\./,"");d in t.getValues()&&t.setError(d,{type:"server",message:n[c][0]??"Invalid value"})})},apiTestViewModel:r,setApiTestViewModel:l}};function M(){const i=F(t=>t.loading.global),r=F(y),{form:l}=V({apiTestDTO:r});return a.jsxs("div",{className:"w-full",children:[a.jsx(u,{control:l.control,name:s.description.name,render:({field:t})=>a.jsxs(f,{children:[a.jsx(T,{children:s.description.label}),a.jsx(b,{children:a.jsx(D,{...t,value:t.value??"",disabled:i,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})}),a.jsx(u,{control:l.control,name:s.moreDescription.name,render:({field:t})=>a.jsxs(f,{children:[a.jsx(T,{children:s.moreDescription.label}),a.jsx(b,{children:a.jsx(D,{...t,value:t.value??"",disabled:i,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})})]})}const G=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{M as D,G as d,V as u};
