import{u as m,R as u,j as e,b as p,r as f}from"./main-DnMLoToh.js";import{C as x,a as h,b as D,d as b,e as C}from"./card-k8pY6nQC.js";import{B as c}from"./button--Dz88CCa.js";import{D as j,a as N,b as S,c as U}from"./dropdown-menu-DsHLFZox.js";import{u as w}from"./useClientDatabaseService-euub3KL5.js";import{u as g}from"./useAppSelector-DZhqBEEd.js";import{u as I}from"./use-show-toast-CfeZrk8u.js";import"./index-CQAmPOwb.js";import"./index-CuqhXDX8.js";import"./index-DtuNiuwk.js";import"./createLucideIcon-DPMyZbAq.js";import"./serviceHandler-BlQljMi1.js";import"./useRequest-D7yC7IBz.js";import"./useAuthState-njnO_Ktr.js";import"./BaseEntity-DGhPHkWu.js";import"./ClientDatabaseViewModel-DgDoSkZt.js";function J({projectViewModel:t}){const l=m(),[a,n]=u.useState(),{connectClientDatabase:i}=w(),r=g(s=>s.clientDatabase.clientDatabase),o=I(),d=async()=>{r?.UUID!=a?.UUID?await i(a?.UUID??"",{onSuccess:s=>{l(p(s)),o("Success","Successfully connecting user to database","success")},onError:()=>{o("Error","Failed to connect user to database","error")}}):(r&&n(r),o("Success","Successfully connecting user to database","success")),f.visit(`/backend/api-test/dashboard?id=${a?.UUID}`)};return e.jsxs(x,{className:"w-full h-full flex flex-col",children:[e.jsx(h,{children:e.jsx(D,{className:"text-center font-semibold",children:t.projectCode})}),e.jsxs(b,{className:"flex flex-col gap-2 flex-1 mb-2",children:[e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Project: "}),e.jsx("span",{className:"font-normal",children:t.projectName})]}),e.jsxs(j,{children:[e.jsx(N,{asChild:!0,children:e.jsx(c,{variant:"outline",children:a?a.databaseName:"Select Database"})}),e.jsx(S,{children:t.clientDatabases.map(s=>e.jsx(U,{onClick:()=>n(s),children:s.databaseName},s.UUID))})]})]}),e.jsx(C,{className:"flex flex-col w-full mt-auto",children:e.jsx(c,{className:"w-full",onClick:d,children:"Connect"})})]})}export{J as default};
