import{u as j}from"./useRequest-DZpzi9Bl.js";import{a0 as h,a8 as u,A as U}from"./main-lnUC2C4t.js";import{h as p}from"./serviceHandler-BlQljMi1.js";import{C as _}from"./ClientDatabaseViewModel-DgDoSkZt.js";const b=["UUID","parentApiTest","clientDatabase","project","testName","transmission","description","isFolder","moreDescription","data","output","scenario"];function A(a,r){return h(a,b,r,"apiTest")}const P=()=>{const{request:a}=j();return{listProjects:async()=>a({url:"/api-test/list-projects",method:"GET"}),indexApiTest:async()=>a({url:"/api-test/index",method:"GET"}),createApiTest:async n=>{const o=n.asDto(),i=A(o,new FormData),e=(await a({url:"/api-test/create",method:"POST",data:i})).apiTest;return new u(e)},updateApiTest:async n=>{const o=n.asDto(),i=A(o,new FormData),e=(await a({url:`/api-test/update?id=${o.UUID}`,method:"POST",data:i})).apiTest;return new u(e)},removeApiTest:async n=>{const o=new FormData;return n.forEach(i=>{o.append("UUIDs[]",i)}),await a({url:"/client-database/remove",method:"POST",data:o})}}};class f{_UUID;_projectCode;_projectName;_clientDatabases;constructor(r,c){this._UUID=r?.UUID??"",this._projectCode=r?.projectCode??"",this._projectName=r?.projectName??"",this._clientDatabases=c}get UUID(){return this._UUID}get projectCode(){return this._projectCode}get projectName(){return this._projectName}get clientDatabases(){return this._clientDatabases}}const O=()=>{const{listProjects:a,indexApiTest:r,createApiTest:c,updateApiTest:m,removeApiTest:d}=P();return{listProjects:async e=>p(async()=>{const t=await a(),s=t.rows.map(T=>{const w=T.clientDatabases.map(y=>new _(y));return new f(T,w)});return{...t,rows:s}},e),indexApiTest:async e=>p(async()=>{const t=await r(),s=t.rows.map(T=>new U(T));return{...t,rows:s}},e),createApiTest:async(e,t)=>{let s=new u(e);return s=await p(async()=>c(s),t),s.asViewModel()},updateApiTest:async(e,t)=>{let s=new u(e);return s=await p(async()=>m(s),t),s.asViewModel()},removeApiTest:async(e,t)=>await p(async()=>d(e),t)}};export{O as u};
