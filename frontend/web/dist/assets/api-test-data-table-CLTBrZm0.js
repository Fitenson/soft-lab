import{a as b,j as e,E as X,P as Y,N as E,Y as J,L as I,M as w,ae as Q,x as W,b as Z}from"./main-C3T8v2Y3.js";import{u as ee,f as te,b as ae}from"./index-TwuOSZMG.js";import{T as re,a as oe,b as j,c as se,d as ne,S as ce,e as _}from"./table-ClfY3imz.js";import{c as T}from"./ColumnConfig-D45u5Gny.js";import{a as v,u as le}from"./useApiTestForm-B3ZP6HQr.js";import{u as ie}from"./index-BeVAE0RU.js";import{C as de}from"./check-toIaySd3.js";import{u as D}from"./useAppSelector-Dr5dKxoe.js";import{I as ue}from"./input-DFKWGPka.js";import{F as pe,a as A,b as be,d as z}from"./form-BMjj30Jq.js";import{d as me}from"./zod-CppQPhVw.js";import{s as fe}from"./apiTestSelectors-BJyltacD.js";import"./button-BVAFB7K0.js";import"./createLucideIcon-CzpkQQ2n.js";import"./ApiTestViewModel-BZncyWgE.js";import"./schemas-D95ZC4Tg.js";var R="Checkbox",[he,$e]=X(R),[ge,F]=he(R);function xe(o){const{__scopeCheckbox:s,checked:i,children:n,defaultChecked:c,disabled:a,form:m,name:d,onCheckedChange:l,required:x,value:k="on",internal_do_not_use_render:r}=o,[t,f]=J({prop:i,defaultProp:c??!1,onChange:l,caller:R}),[u,h]=b.useState(null),[C,p]=b.useState(null),g=b.useRef(!1),N=u?!!m||!!u.closest("form"):!0,S={checked:t,disabled:a,setChecked:f,control:u,setControl:h,name:d,form:m,value:k,hasConsumerStoppedPropagationRef:g,required:x,defaultChecked:y(c)?!1:c,isFormControl:N,bubbleInput:C,setBubbleInput:p};return e.jsx(ge,{scope:s,...S,children:ke(r)?r(S):n})}var B="CheckboxTrigger",L=b.forwardRef(({__scopeCheckbox:o,onKeyDown:s,onClick:i,...n},c)=>{const{control:a,value:m,disabled:d,checked:l,required:x,setControl:k,setChecked:r,hasConsumerStoppedPropagationRef:t,isFormControl:f,bubbleInput:u}=F(B,o),h=I(c,k),C=b.useRef(l);return b.useEffect(()=>{const p=a?.form;if(p){const g=()=>r(C.current);return p.addEventListener("reset",g),()=>p.removeEventListener("reset",g)}},[a,r]),e.jsx(E.button,{type:"button",role:"checkbox","aria-checked":y(l)?"mixed":l,"aria-required":x,"data-state":q(l),"data-disabled":d?"":void 0,disabled:d,value:m,...n,ref:h,onKeyDown:w(s,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:w(i,p=>{r(g=>y(g)?!0:!g),u&&f&&(t.current=p.isPropagationStopped(),t.current||p.stopPropagation())})})});L.displayName=B;var M=b.forwardRef((o,s)=>{const{__scopeCheckbox:i,name:n,checked:c,defaultChecked:a,required:m,disabled:d,value:l,onCheckedChange:x,form:k,...r}=o;return e.jsx(xe,{__scopeCheckbox:i,checked:c,defaultChecked:a,disabled:d,required:m,onCheckedChange:x,name:n,form:k,value:l,internal_do_not_use_render:({isFormControl:t})=>e.jsxs(e.Fragment,{children:[e.jsx(L,{...r,ref:s,__scopeCheckbox:i}),t&&e.jsx(O,{__scopeCheckbox:i})]})})});M.displayName=R;var $="CheckboxIndicator",H=b.forwardRef((o,s)=>{const{__scopeCheckbox:i,forceMount:n,...c}=o,a=F($,i);return e.jsx(Y,{present:n||y(a.checked)||a.checked===!0,children:e.jsx(E.span,{"data-state":q(a.checked),"data-disabled":a.disabled?"":void 0,...c,ref:s,style:{pointerEvents:"none",...o.style}})})});H.displayName=$;var K="CheckboxBubbleInput",O=b.forwardRef(({__scopeCheckbox:o,...s},i)=>{const{control:n,hasConsumerStoppedPropagationRef:c,checked:a,defaultChecked:m,required:d,disabled:l,name:x,value:k,form:r,bubbleInput:t,setBubbleInput:f}=F(K,o),u=I(i,f),h=ie(a),C=Q(n);b.useEffect(()=>{const g=t;if(!g)return;const N=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(N,"checked").set,G=!c.current;if(h!==a&&P){const U=new Event("click",{bubbles:G});g.indeterminate=y(a),P.call(g,y(a)?!1:a),g.dispatchEvent(U)}},[t,h,a,c]);const p=b.useRef(y(a)?!1:a);return e.jsx(E.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??p.current,required:d,disabled:l,name:x,value:k,form:r,...s,tabIndex:-1,ref:u,style:{...s.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});O.displayName=K;function ke(o){return typeof o=="function"}function y(o){return o==="indeterminate"}function q(o){return y(o)?"indeterminate":o?"checked":"unchecked"}function V({className:o,...s}){return e.jsx(M,{"data-slot":"checkbox",className:W("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",o),...s,children:e.jsx(H,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(de,{className:"size-3.5"})})})}function Ce(o,s){return({getValue:i,row:n})=>{const c=!!i(),a=n.original,m=s?.disabled?.(a)??!1,d=s?.ariaLabel?.(a)??"Toggle";return e.jsx("div",{className:"flex items-center",onClick:l=>l.stopPropagation(),children:e.jsx(V,{checked:c,disabled:m,"aria-label":d,onCheckedChange:l=>o({row:a,next:!!l}),className:"translate-y-[1px]"})})}}const ve=[T({accessorKey:v.enabled.name,header:null,size:44,minSize:36,maxSize:64,enableSorting:!1,cell:Ce(({row:o,next:s})=>{console.log(o),console.log(s)},{})}),T({accessorKey:v.key.name,header:v.key.label,enableSorting:!1}),T({accessorKey:v.value.name,header:v.value.label,enableSorting:!1}),T({accessorKey:v.description.name,header:v.description.label,enableSorting:!1})],ye=["key","value","description"],je=o=>ye.includes(o);function He(){const o=D(fe),{form:s,apiTestViewModel:i}=le({apiTestDTO:o}),{fields:n,append:c}=me({control:s.control,name:"apiTestData"}),a=ee({data:i?.apiTestData?.rows??[],columns:ve,enableRowSelection:!0,enableSorting:!1,enableFilters:!1,enableSortingRemoval:!1,getCoreRowModel:ae()}),m=D(Z),d=b.useRef(null),l=r=>{if(typeof r=="number"){if(d.current===r)return;d.current=r}c({enabled:0,key:"",value:"",description:""},{shouldFocus:!1})},x=(r,t)=>{s.setValue(`apiTestData.${r}.enabled`,t),r===n.length-1&&t===1&&l(r)},k=r=>{s.getValues(`apiTestData.${r}.enabled`)!==1&&s.setValue(`apiTestData.${r}.enabled`,1),r===n.length-1&&l(r)};return b.useEffect(()=>{n.length===0&&(c({enabled:0,key:"",value:"",description:""},{shouldFocus:!1}),d.current=null)},[n.length,c]),e.jsx(pe,{...s,children:e.jsxs(re,{className:"card",children:[e.jsx(oe,{children:a.getHeaderGroups().map(r=>e.jsx(j,{className:"border-b border-accent dark:border-accent",children:r.headers.map(t=>e.jsxs(se,{className:"m-0 p-0 border-r border-accent dark:border-accent last:border-r-0",style:{width:t.getSize()},children:[t.isPlaceholder?null:te(t.column.columnDef.header,t.getContext()),t.column.getCanResize()&&e.jsx("div",{onMouseDown:t.getResizeHandler(),onTouchStart:t.getResizeHandler(),className:`absolute right-0 top-0 h-full w-1 cursor-col-resize select-none
                                            ${t.column.getIsResizing()?"bg-blue-500":"bg-transparent hover:bg-gray-400"}`})]},t.id))},r.id))}),e.jsx(ne,{children:m?Array.from({length:5}).map((r,t)=>e.jsx(j,{children:a.getAllLeafColumns().map(f=>e.jsx("td",{className:"px-2 py-2",children:e.jsx(ce,{className:"h-4 w-full rounded-2xl p-4 m-1 gap-2"})},f.id))},`skeleton-${t}`)):n.length>0?n.map((r,t)=>e.jsx(j,{className:"cursor-pointer p-2 border border-accent dark:border-accent text-foreground dark:text-foreground",children:a.getAllLeafColumns().map(f=>e.jsx(_,{className:"p-2",children:f.id===v.enabled.name?e.jsx(A,{control:s.control,name:`apiTestData.${t}.enabled`,render:({field:u})=>e.jsx(be,{children:e.jsx(z,{children:e.jsx("div",{onClick:h=>h.stopPropagation(),className:"flex items-center",children:e.jsx(V,{checked:u.value===1,onCheckedChange:h=>{const C=h?1:0;u.onChange(C),x(t,C)},"aria-label":"Toggle",className:"cursor-pointer h-6 w-6 shrink-0 translate-y-[1px]"})})})})}):je(f.id)&&e.jsx(A,{control:s.control,name:`apiTestData.${t}.${f.id}`,render:({field:u})=>e.jsx(z,{children:e.jsx(ue,{...u,value:u.value??"",onChange:h=>u.onChange(h.target.value),onFocus:()=>k(t),className:"w-full h-8"})})})},f.id))},r.id)):e.jsx(j,{children:e.jsx(_,{colSpan:a.getAllLeafColumns().length,className:"h-24 text-center text-muted-foreground",children:"No test data rows found."})})})]})})}export{He as default};
