import{u as f,R as h,j as e,f as p}from"./main-rRv66LRu.js";import{C as j,a as C,b as D,d as g,e as N}from"./card-DIgyzKud.js";import{C as w,u as v,D as b,a as S,b as U,c as y,d as E,e as k,f as R,g as T}from"./useClientDatabaseService-BJn1r7Yp.js";import{B as t}from"./button-bN4rln9q.js";import{u as F}from"./use-show-toast-DTQfoTPk.js";import"./index-B2B7QW1k.js";import"./index-DUM-k9uY.js";import"./createLucideIcon-BYSXuSnP.js";import"./serviceHandler-BlQljMi1.js";import"./useRequest-lw6-bRWX.js";import"./useAppSelector-C3gUEf_H.js";import"./useAuthState-9ObYT1fq.js";import"./BaseEntity-DGhPHkWu.js";function L({clientDatabaseDTO:o}){const a=F(),c=f(),[i,n]=h.useState(!1),s=new w(o),{removeClientDatabase:d,connectClientDatabase:m}=v(),x=async()=>{const r=[s.UUID];await d(r,{onSuccess:l=>{l.success&&l.success.length>0?(a("Success","Connection successfully removed","success"),n(!1)):a("Error","Failed to remove the connection","error")},onError:()=>{a("Error","Server error","error")}})},u=async()=>{await m(o.UUID,{onSuccess:r=>{c(p(r))},onError:()=>{a("Error","Failed to connect","error")}})};return e.jsxs(j,{className:"w-full h-full",children:[e.jsx(C,{children:e.jsx(D,{className:"text-center font-semibold",children:s.databaseName})}),e.jsxs(g,{className:"flex flex-col gap-2 text-xs",children:[e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Schema: "}),e.jsx("span",{className:"font-normal",children:s.databaseName})]}),e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Port: "}),e.jsx("span",{className:"font-normal",children:s.port})]}),e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Username: "}),e.jsx("span",{className:"font-normal",children:s.username})]})]}),e.jsxs(N,{className:"flex flex-col w-full gap-2",children:[e.jsx(t,{className:"w-full",onClick:u,children:"Connect"}),e.jsxs(b,{open:i,onOpenChange:n,children:[e.jsx(S,{asChild:!0,children:e.jsx(t,{variant:"destructive",className:"w-full",children:"Delete"})}),e.jsxs(U,{className:"sm:max-w-[425px]",children:[e.jsxs(y,{children:[e.jsx(E,{children:"Delete Connection"}),e.jsx(k,{children:"Are you sure you want to delete this connection? This action cannot be undone."})]}),e.jsxs(R,{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2",children:[e.jsx(T,{asChild:!0,children:e.jsx(t,{variant:"outline",className:"sm:w-auto w-full",children:"Cancel"})}),e.jsx(t,{onClick:x,variant:"destructive",className:"sm:w-auto w-full",children:"Remove"})]})]})]})]})]})}export{L as default};
