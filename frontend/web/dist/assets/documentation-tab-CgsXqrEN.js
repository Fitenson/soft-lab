import{a as x,j as o}from"./main-DY2sbF6P.js";import{a as u,b as f,c as b,d as T}from"./form-sOEOGGHr.js";import{u as h}from"./index.esm-D7VeYQlz.js";import{a as g}from"./zod-BErPEfBI.js";import{A as j}from"./ApiTestViewModel-CvJ_mYgo.js";import{A as s}from"./ApiTestFormField-D8capE04.js";import{A as m}from"./ApiTestDataFormField-B4kiEgJZ.js";import{o as v,b as w,s as a,n as A,c as y}from"./schemas-DUe4ZLmH.js";import{T as D}from"./textarea-BPnbcbrs.js";import{u as F}from"./useAppSelector-BiPAHM_x.js";import{s as N}from"./apiTestSelectors-BJyltacD.js";const S=v({enabled:A().optional(),key:a().max(m.key.max,{error:m.key.maxError}).optional(),value:a().max(m.value.max,{error:m.value.maxError}).optional(),description:a().max(m.description.max,{error:m.description.maxError}).optional(),fieldType:a().optional(),isNew:w().optional()}),V=v({testName:a().max(s.testName.max,{error:s.testName.maxError}),parentApiTest:a().optional(),clientDatabase:a(),project:a(),isFolder:A(),transmission:a(),description:a().max(s.description.max,{error:s.description.maxError}).optional(),moreDescription:a().max(s.moreDescription.max,{error:s.moreDescription.maxError}).optional()}).extend({apiTestData:y(S).default([]).optional()}),M=({apiTestDTO:i})=>{const[r,l]=x.useState(()=>i?new j(i):null),t=h({resolver:g(V),defaultValues:{parentApiTest:r?.parentApiTest??"",clientDatabase:r?.clientDatabase??"",project:r?.project??"",testName:r?.testName??"",isFolder:r?.isFolder??0,transmission:r?.transmission??"",description:r?.description??"",moreDescription:r?.moreDescription??"",apiTestData:r?.apiTestData?r?.apiTestData.map(e=>e.dto):[]}});return x.useEffect(()=>{if(i){const e=new j(i);l(e),t.reset({parentApiTest:e.parentApiTest??"",clientDatabase:e.clientDatabase??"",project:e.project??"",testName:e.testName??"",isFolder:e.isFolder??0,transmission:e.transmission??"",description:e.description??"",moreDescription:e.moreDescription??"",apiTestData:e.apiTestData?e?.apiTestData.map(p=>p.dto):[]})}},[i,t]),{form:t,setFormError:(e,p)=>{const{setToastError:E}=p||{},n=e?.response?.data?.errors??{};typeof n=="string"?E?.(n):n&&Object.keys(n).length>0&&Object.keys(n).forEach(c=>{const d=c.replace(/^apiTest\./,"");d in t.getValues()&&t.setError(d,{type:"server",message:n[c][0]??"Invalid value"})})},apiTestViewModel:r,setApiTestViewModel:l}};function k(){const i=F(t=>t.loading.global),r=F(N),{form:l}=M({apiTestDTO:r});return o.jsxs("div",{className:"w-full",children:[o.jsx(u,{control:l.control,name:s.description.name,render:({field:t})=>o.jsxs(f,{children:[o.jsx(b,{children:s.description.label}),o.jsx(T,{children:o.jsx(D,{...t,value:t.value??"",disabled:i,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})}),o.jsx(u,{control:l.control,name:s.moreDescription.name,render:({field:t})=>o.jsxs(f,{children:[o.jsx(b,{children:s.moreDescription.label}),o.jsx(T,{children:o.jsx(D,{...t,value:t.value??"",disabled:i,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})})]})}const J=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));export{k as D,J as d,M as u};
