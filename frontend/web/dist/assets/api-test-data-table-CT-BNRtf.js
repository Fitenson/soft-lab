import{a as h,j as e,A as U,P as X,J as E,U as J,G as I,I as F,aa as Q,p as W,b as Y}from"./main-D4bI6BKa.js";import{u as Z,f as ee,b as te}from"./index-CLoitoyB.js";import{T as ae,a as re,b as j,c as ne,d as se,S as oe,e as w}from"./table-BMW4_bMH.js";import{c as R}from"./ColumnConfig-CqgK_0-e.js";import{A as k}from"./ApiTestDataFormField-Bsh2LolP.js";import{u as ce}from"./index-CsIueOTW.js";import{C as le}from"./check-CNXSdWW9.js";import{u as ie}from"./useAppSelector-DxgkrSSa.js";import{I as de}from"./input-DEjThRMb.js";import{F as ue,a as D,b as pe,d as A}from"./form-DAij8tw6.js";import{d as be}from"./index.esm-BxVilJKE.js";import"./button-BKnOxFCw.js";import"./createLucideIcon-C98CFg3S.js";var T="Checkbox",[he,Ie]=U(T),[me,P]=he(T);function fe(t){const{__scopeCheckbox:s,checked:o,children:l,defaultChecked:i,disabled:a,form:p,name:m,onCheckedChange:d,required:n,value:r="on",internal_do_not_use_render:c}=t,[u,g]=J({prop:o,defaultProp:i??!1,onChange:d,caller:T}),[x,v]=h.useState(null),[y,b]=h.useState(null),f=h.useRef(!1),N=x?!!p||!!x.closest("form"):!0,S={checked:u,disabled:a,setChecked:g,control:x,setControl:v,name:m,form:p,value:r,hasConsumerStoppedPropagationRef:f,required:n,defaultChecked:C(i)?!1:i,isFormControl:N,bubbleInput:y,setBubbleInput:b};return e.jsx(me,{scope:s,...S,children:ge(c)?c(S):l})}var z="CheckboxTrigger",B=h.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:o,...l},i)=>{const{control:a,value:p,disabled:m,checked:d,required:n,setControl:r,setChecked:c,hasConsumerStoppedPropagationRef:u,isFormControl:g,bubbleInput:x}=P(z,t),v=I(i,r),y=h.useRef(d);return h.useEffect(()=>{const b=a?.form;if(b){const f=()=>c(y.current);return b.addEventListener("reset",f),()=>b.removeEventListener("reset",f)}},[a,c]),e.jsx(E.button,{type:"button",role:"checkbox","aria-checked":C(d)?"mixed":d,"aria-required":n,"data-state":q(d),"data-disabled":m?"":void 0,disabled:m,value:p,...l,ref:v,onKeyDown:F(s,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:F(o,b=>{c(f=>C(f)?!0:!f),x&&g&&(u.current=b.isPropagationStopped(),u.current||b.stopPropagation())})})});B.displayName=z;var L=h.forwardRef((t,s)=>{const{__scopeCheckbox:o,name:l,checked:i,defaultChecked:a,required:p,disabled:m,value:d,onCheckedChange:n,form:r,...c}=t;return e.jsx(fe,{__scopeCheckbox:o,checked:i,defaultChecked:a,disabled:m,required:p,onCheckedChange:n,name:l,form:r,value:d,internal_do_not_use_render:({isFormControl:u})=>e.jsxs(e.Fragment,{children:[e.jsx(B,{...c,ref:s,__scopeCheckbox:o}),u&&e.jsx(K,{__scopeCheckbox:o})]})})});L.displayName=T;var M="CheckboxIndicator",$=h.forwardRef((t,s)=>{const{__scopeCheckbox:o,forceMount:l,...i}=t,a=P(M,o);return e.jsx(X,{present:l||C(a.checked)||a.checked===!0,children:e.jsx(E.span,{"data-state":q(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...t.style}})})});$.displayName=M;var H="CheckboxBubbleInput",K=h.forwardRef(({__scopeCheckbox:t,...s},o)=>{const{control:l,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:p,required:m,disabled:d,name:n,value:r,form:c,bubbleInput:u,setBubbleInput:g}=P(H,t),x=I(o,g),v=ce(a),y=Q(l);h.useEffect(()=>{const f=u;if(!f)return;const N=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(N,"checked").set,V=!i.current;if(v!==a&&_){const G=new Event("click",{bubbles:V});f.indeterminate=C(a),_.call(f,C(a)?!1:a),f.dispatchEvent(G)}},[u,v,a,i]);const b=h.useRef(C(a)?!1:a);return e.jsx(E.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??b.current,required:m,disabled:d,name:n,value:r,form:c,...s,tabIndex:-1,ref:x,style:{...s.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});K.displayName=H;function ge(t){return typeof t=="function"}function C(t){return t==="indeterminate"}function q(t){return C(t)?"indeterminate":t?"checked":"unchecked"}function O({className:t,...s}){return e.jsx(L,{"data-slot":"checkbox",className:W("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx($,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(le,{className:"size-3.5"})})})}function xe(t,s){return({getValue:o,row:l})=>{const i=!!o(),a=l.original,p=s?.disabled?.(a)??!1,m=s?.ariaLabel?.(a)??"Toggle";return e.jsx("div",{className:"flex items-center",onClick:d=>d.stopPropagation(),children:e.jsx(O,{checked:i,disabled:p,"aria-label":m,onCheckedChange:d=>t({row:a,next:!!d}),className:"translate-y-[1px]"})})}}const ke=[R({accessorKey:k.enabled.name,header:null,size:44,minSize:36,maxSize:64,enableSorting:!1,cell:xe(({row:t,next:s})=>{console.log(t),console.log(s)},{})}),R({accessorKey:k.key.name,header:k.key.label,enableSorting:!1}),R({accessorKey:k.value.name,header:k.value.label,enableSorting:!1}),R({accessorKey:k.description.name,header:k.description.label,enableSorting:!1})],Ce=["key","value","description"],ve=t=>Ce.includes(t);function ze({form:t}){const{fields:s,append:o}=be({control:t.control,name:"apiTestData"}),l=Z({data:t.getValues("apiTestData")??[],columns:ke,enableRowSelection:!0,enableSorting:!1,enableFilters:!1,enableSortingRemoval:!1,getCoreRowModel:te()}),i=ie(Y),a=h.useRef(null),p=n=>{if(typeof n=="number"){if(a.current===n)return;a.current=n}o({enabled:0,key:"",value:"",description:""},{shouldFocus:!1})},m=(n,r)=>{t.setValue(`apiTestData.${n}.enabled`,r),n===s.length-1&&r===1&&p(n)},d=n=>{t.getValues(`apiTestData.${n}.enabled`)!==1&&t.setValue(`apiTestData.${n}.enabled`,1),n===s.length-1&&p(n)};return h.useEffect(()=>{s.length===0&&(o({enabled:0,key:"",value:"",description:""},{shouldFocus:!1}),a.current=null)},[s.length,o]),e.jsx(ue,{...t,children:e.jsxs(ae,{className:"card",children:[e.jsx(re,{children:l.getHeaderGroups().map(n=>e.jsx(j,{className:"border-b border-accent dark:border-accent",children:n.headers.map(r=>e.jsxs(ne,{className:"m-0 p-0 border-r border-accent dark:border-accent last:border-r-0",style:{width:r.getSize()},children:[r.isPlaceholder?null:ee(r.column.columnDef.header,r.getContext()),r.column.getCanResize()&&e.jsx("div",{onMouseDown:r.getResizeHandler(),onTouchStart:r.getResizeHandler(),className:`absolute right-0 top-0 h-full w-1 cursor-col-resize select-none
                                            ${r.column.getIsResizing()?"bg-blue-500":"bg-transparent hover:bg-gray-400"}`})]},r.id))},n.id))}),e.jsx(se,{children:i?Array.from({length:5}).map((n,r)=>e.jsx(j,{children:l.getAllLeafColumns().map(c=>e.jsx("td",{className:"px-2 py-2",children:e.jsx(oe,{className:"h-4 w-full rounded-2xl p-4 m-1 gap-2"})},c.id))},`skeleton-${r}`)):s.length>0?s.map((n,r)=>e.jsx(j,{className:"cursor-pointer p-2 border border-accent dark:border-accent text-foreground dark:text-foreground",children:l.getAllLeafColumns().map(c=>e.jsx(w,{className:"p-2",children:c.id===k.enabled.name?e.jsx(D,{control:t.control,name:`apiTestData.${r}.enabled`,render:({field:u})=>e.jsx(pe,{children:e.jsx(A,{children:e.jsx("div",{onClick:g=>g.stopPropagation(),className:"flex items-center",children:e.jsx(O,{checked:u.value===1,onCheckedChange:g=>{const x=g?1:0;u.onChange(x),m(r,x)},"aria-label":"Toggle",className:"cursor-pointer h-6 w-6 shrink-0 translate-y-[1px]"})})})})}):ve(c.id)&&e.jsx(D,{control:t.control,name:`apiTestData.${r}.${c.id}`,render:({field:u})=>e.jsx(A,{children:e.jsx(de,{...u,value:u.value??"",onChange:g=>u.onChange(g.target.value),onFocus:()=>d(r),className:"w-full h-8"})})})},c.id))},n.id)):e.jsx(j,{children:e.jsx(w,{colSpan:l.getAllLeafColumns().length,className:"h-24 text-center text-muted-foreground",children:"No test data rows found."})})})]})})}export{ze as default};
