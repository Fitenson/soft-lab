import{h as D}from"./serviceHandler-BlQljMi1.js";import{u as C}from"./useRequest-BmthMcGV.js";import{a5 as y}from"./main-Bs3Kwuia.js";import{B as v}from"./BaseEntity-DGhPHkWu.js";import{C as b}from"./ClientDatabaseViewModel-CZz8IN5P.js";const U=["UUID","host","port","databaseName","databaseSchema","username","password","project","valid"];function w(n,e){return y(n,U,e,"clientDatabase")}class d extends v{_UUID;_databaseName;_databaseSchema;_refreshToken;_host;_port;_username;_password;_project;_valid;constructor(e){super(e),this._UUID=e.UUID??"",this._databaseName=e.databaseName??"",this._databaseSchema=e.databaseSchema??"",this._refreshToken=e.refreshToken??"",this._host=e.host??"",this._port=e.port??"",this._username=e.username??"",this._password=e.password??"",this._project=e.project??"",this._valid=e.valid??!0}asViewModel(){return new b(this.asDto())}get UUID(){return this._UUID}set UUID(e){this._UUID=e}get databaseName(){return this._databaseName}set databaseName(e){this._databaseName=e}get databaseSchema(){return this._databaseSchema}set databaseSchema(e){this._databaseSchema=e}get refreshToken(){return this._refreshToken}set refreshToken(e){this._refreshToken=e}get host(){return this._host}set host(e){this._host=e}get port(){return this._port}set port(e){this._port=e}get username(){return this._username}set username(e){this._username=e}get password(){return this._password}set password(e){this._password=e}get project(){return this._project}set project(e){this._project=e}get valid(){return this._valid}set valid(e){this._valid=e}}const S=()=>{const{request:n}=C();return{indexClientDatabase:async()=>await n({url:"client-database/index",method:"GET"}),createClientDatabase:async r=>{const o=r.asDto(),c=w(o,new FormData),t=(await n({url:"/client-database/create",method:"POST",data:c})).clientDatabase;return new d(t)},updateClientDatabase:async r=>{const o=r.asDto(),c=w(o,new FormData),t=(await n({url:`/client-database/update?id=${o.UUID}`,method:"POST",data:c})).clientDatabase;return new d(t)},removeClientDatabase:async r=>{const o=new FormData;return r.forEach(c=>{o.append("UUIDs[]",c)}),await n({url:"/client-database/remove",method:"POST",data:o})},connectClientDatabase:async r=>await n({url:`/client-database/connect?id=${r}`,method:"GET"})}},M=()=>{const{indexClientDatabase:n,createClientDatabase:e,updateClientDatabase:u,removeClientDatabase:h,connectClientDatabase:m}=S();return{indexClientDatabase:async t=>D(async()=>{const a=await n(),s=a.rows.map(i=>new b(i));return{...a,rows:s}},t),createClientDatabase:async(t,a)=>{let s=new d(t);return s=await D(async()=>e(s),{...a,onSuccess:i=>{const l=i.asViewModel();a?.onSuccess?.(l)}}),s.asViewModel()},updateClientDatabase:async(t,a)=>{let s=new d(t);return s=await D(async()=>u(s),{...a,onSuccess:i=>{const l=i.asViewModel();a?.onSuccess?.(l)}}),s.asViewModel()},removeClientDatabase:async(t,a)=>await D(async()=>h(t),a),connectClientDatabase:async(t,a)=>{const s=await D(async()=>m(t),{...a,onSuccess:i=>{const l=new b(i);a?.onSuccess?.(l)}});return new b(s)}}};export{M as u};
