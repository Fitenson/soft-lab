import{a as l,l as p,u as g,m as u,n as c,o as f,r as w}from"./main-D7KKnCmF.js";import{u as b}from"./useAppSelector-DM_vjqwN.js";import{u as x}from"./useAuthState-CulQXd0o.js";const E=()=>{const{authViewModel:e}=x(),a=l.useMemo(()=>p.create({baseURL:"http://softlab-backend.test/backend",withCredentials:!0}),[]),i=b(s=>s.loading.global),d=g(),[h,m]=l.useState(null);return{isLoading:i,error:h,request:async s=>{const r=s?.withLoading!==!1;let o={};if(r&&u.dispatch(c(!0)),e){console.log("View Model: ",e),console.log("Username: ",e?.username),console.log("Password: ",e?.password);const t=`${e.username}:${e.password}`;console.log("Credentials: ",t),o={Authorization:`Basic ${btoa(t)}`},console.log("Auth header: ",o)}else console.log("Empty auth: ",e);try{return(await a.request({url:s?.url,method:s?.method,data:s?.data,...s?.config,headers:{"Content-Type":"multipart/form-data",...o}})).data}catch(t){const n=t;throw n.response&&n.response.status===401&&(d(f()),w.visit("/login")),m(t),t}finally{r&&u.dispatch(c(!1))}},axiosInstance:a}};export{E as u};
