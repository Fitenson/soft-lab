import{a as x,j as a}from"./main-wTblVsq0.js";import{a as u,b as f,c as T,d as b}from"./form-CEUoIQsp.js";import{u as E}from"./index.esm-CZz6cprQ.js";import{a as h}from"./zod-UmGTRyvS.js";import{A as j}from"./ApiTestViewModel-DYXz1GS2.js";import{A as s}from"./ApiTestFormField-Mbezg9jC.js";import{A as m}from"./ApiTestDataFormField-DE3smGIc.js";import{o as v,s as r,n as g,b as w}from"./schemas-D95ZC4Tg.js";import{T as D}from"./textarea-DccAv0VT.js";import{u as F}from"./useAppSelector-BW6dmEz4.js";import{s as y}from"./apiTestSelectors-BJyltacD.js";const N=v({UUID:r().optional(),enabled:r().optional(),key:r().max(m.key.max,{error:m.key.maxError}).optional(),value:r().max(m.value.max,{error:m.value.maxError}).optional(),description:r().max(m.description.max,{error:m.description.maxError}).optional(),fieldType:r().optional(),isNew:r().optional()}),S=v({testName:r().max(s.testName.max,{error:s.testName.maxError}),parentApiTest:r().optional(),clientDatabase:r(),project:r(),isFolder:g(),transmission:r(),description:r().max(s.description.max,{error:s.description.maxError}).optional(),moreDescription:r().max(s.moreDescription.max,{error:s.moreDescription.maxError}).optional()}).extend({apiTestData:w(N).default([]).optional()}),V=({apiTestDTO:i})=>{const[t,l]=x.useState(()=>i?new j(i):null),o=E({resolver:h(S),defaultValues:{parentApiTest:t?.parentApiTest??"",clientDatabase:t?.clientDatabase??"",project:t?.project??"",testName:t?.testName??"",isFolder:t?.isFolder??0,transmission:t?.transmission??"",description:t?.description??"",moreDescription:t?.moreDescription??"",apiTestData:t?.apiTestData?t?.apiTestData.map(e=>e.dto):[]}});return x.useEffect(()=>{if(i){const e=new j(i);l(e),o.reset({parentApiTest:e.parentApiTest??"",clientDatabase:e.clientDatabase??"",project:e.project??"",testName:e.testName??"",isFolder:e.isFolder??0,transmission:e.transmission??"",description:e.description??"",moreDescription:e.moreDescription??"",apiTestData:e.apiTestData?e?.apiTestData.map(p=>p.dto):[]})}},[i,o]),{form:o,setFormError:(e,p)=>{const{setToastError:A}=p||{},n=e?.response?.data?.errors??{};typeof n=="string"?A?.(n):n&&Object.keys(n).length>0&&Object.keys(n).forEach(c=>{const d=c.replace(/^apiTest\./,"");d in o.getValues()&&o.setError(d,{type:"server",message:n[c][0]??"Invalid value"})})},apiTestViewModel:t,setApiTestViewModel:l}};function M(){const i=F(o=>o.loading.global),t=F(y),{form:l}=V({apiTestDTO:t});return a.jsxs("div",{className:"w-full",children:[a.jsx(u,{control:l.control,name:s.description.name,render:({field:o})=>a.jsxs(f,{children:[a.jsx(T,{children:s.description.label}),a.jsx(b,{children:a.jsx(D,{...o,value:o.value??"",disabled:i,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})}),a.jsx(u,{control:l.control,name:s.moreDescription.name,render:({field:o})=>a.jsxs(f,{children:[a.jsx(T,{children:s.moreDescription.label}),a.jsx(b,{children:a.jsx(D,{...o,value:o.value??"",disabled:i,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})})]})}const B=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{M as D,B as d,V as u};
