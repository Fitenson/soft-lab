import{j as t,g as d,K as x}from"./main-MEdhB5dg.js";import{R as v,C as y,a as w,T as U,b as T,D as S,P as N,O as j}from"./index-CZZ-zNjt.js";import{X as I}from"./index-ITQwHDNF.js";import{h}from"./serviceHandler-BlQljMi1.js";import{u as k}from"./useRequest-D_nlpoxs.js";import{B as O}from"./BaseEntity-DGhPHkWu.js";class b{_UUID;_databaseName;_databaseSchema;_refreshToken;_host;_port;_username;_password;_valid;constructor(e){this._UUID=e.UUID??"",this._databaseName=e.databaseName??"",this._databaseSchema=e.databaseSchema??"",this._refreshToken=e.refreshToken??"",this._host=e.host??"",this._port=e.port??"",this._username=e.username??"",this._password=e.password??"",this._valid=e.valid??!0}get UUID(){return this._UUID}get databaseName(){return this._databaseName}get databaseSchema(){return this._databaseSchema}get refreshToken(){return this._refreshToken}get host(){return this._host}get port(){return this._port}get username(){return this._username}get password(){return this._password}get valid(){return this._valid}}function K({...a}){return t.jsx(v,{"data-slot":"dialog",...a})}function $({...a}){return t.jsx(U,{"data-slot":"dialog-trigger",...a})}function R({...a}){return t.jsx(N,{"data-slot":"dialog-portal",...a})}function H({...a}){return t.jsx(w,{"data-slot":"dialog-close",...a})}function M({className:a,...e}){return t.jsx(j,{"data-slot":"dialog-overlay",className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...e})}function X({className:a,children:e,showCloseButton:m=!0,...D}){return t.jsxs(R,{"data-slot":"dialog-portal",children:[t.jsx(M,{}),t.jsxs(y,{"data-slot":"dialog-content",className:d("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...D,children:[e,m&&t.jsxs(w,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[t.jsx(I,{}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function A({className:a,...e}){return t.jsx("div",{"data-slot":"dialog-header",className:d("flex flex-col gap-2 text-center sm:text-left",a),...e})}function J({className:a,...e}){return t.jsx("div",{"data-slot":"dialog-footer",className:d("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...e})}function L({className:a,...e}){return t.jsx(T,{"data-slot":"dialog-title",className:d("text-lg leading-none font-semibold",a),...e})}function Q({className:a,...e}){return t.jsx(S,{"data-slot":"dialog-description",className:d("text-muted-foreground text-sm",a),...e})}const E=["UUID","host","port","databaseName","databaseSchema","username","password","valid"];function f(a,e){return x(a,E,e,"clientDatabase")}class p extends O{_UUID;_databaseName;_databaseSchema;_refreshToken;_host;_port;_username;_password;_valid;constructor(e){super(e),this._UUID=e.UUID??"",this._databaseName=e.databaseName??"",this._databaseSchema=e.databaseSchema??"",this._refreshToken=e.refreshToken??"",this._host=e.host??"",this._port=e.port??"",this._username=e.username??"",this._password=e.password??"",this._valid=e.valid??!0}asViewModel(){return new b(this.asDto())}get UUID(){return this._UUID}set UUID(e){this._UUID=e}get databaseName(){return this._databaseName}set databaseName(e){this._databaseName=e}get databaseSchema(){return this._databaseSchema}set databaseSchema(e){this._databaseSchema=e}get refreshToken(){return this._refreshToken}set refreshToken(e){this._refreshToken=e}get host(){return this._host}set host(e){this._host=e}get port(){return this._port}set port(e){this._port=e}get username(){return this._username}set username(e){this._username=e}get password(){return this._password}set password(e){this._password=e}get valid(){return this._valid}set valid(e){this._valid=e}}const z=()=>{const{request:a}=k();return{indexClientDatabase:async()=>await a({url:"client-database/index",method:"GET"}),createClientDatabase:async r=>{const i=r.asDto(),c=f(i,new FormData),s=(await a({url:"/client-database/create",method:"POST",data:c})).clientDatabase;return new p(s)},updateClientDatabase:async r=>{const i=r.asDto(),c=f(i,new FormData),s=(await a({url:`/client-database/update?id=${i.UUID}`,method:"POST",data:c})).clientDatabase;return new p(s)},removeClientDatabase:async r=>{const i=new FormData;return r.forEach(c=>{i.append("UUIDs[]",c)}),await a({url:"/client-database/remove",method:"POST",data:i})},connectClientDatabase:async r=>await a({url:`/client-database/connect?id=${r}`,method:"GET"})}},W=()=>{const{indexClientDatabase:a,createClientDatabase:e,updateClientDatabase:m,removeClientDatabase:D,connectClientDatabase:g}=z();return{indexClientDatabase:async s=>h(async()=>{const n=await a(),o=n.rows.map(l=>new b(l));return{...n,rows:o}},s),createClientDatabase:async(s,n)=>{let o=new p(s);return o=await h(async()=>e(o),{...n,onSuccess:l=>{const u=l.asViewModel();n?.onSuccess?.(u)}}),o.asViewModel()},updateClientDatabase:async(s,n)=>{let o=new p(s);return o=await h(async()=>m(o),{...n,onSuccess:l=>{const u=l.asViewModel();n?.onSuccess?.(u)}}),o.asViewModel()},removeClientDatabase:async(s,n)=>await h(async()=>D(s),n),connectClientDatabase:async(s,n)=>{const o=await h(async()=>g(s),{...n,onSuccess:l=>{const u=new b(l);n?.onSuccess?.(u)}});return new b(o)}}};export{b as C,K as D,$ as a,X as b,A as c,L as d,Q as e,J as f,H as g,W as u};
