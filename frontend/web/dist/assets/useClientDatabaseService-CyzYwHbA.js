import{j as t,h as d,K as _}from"./main-DDq5fYn4.js";import{R as v,C as y,a as C,T as j,b as T,D as U,P as S,O as N}from"./index-C71pS_cT.js";import{X as I}from"./x-k7glXLur.js";import{h as m}from"./serviceHandler-BlQljMi1.js";import{u as O}from"./useRequest-okGnsHTs.js";import{B as R}from"./BaseEntity-DGhPHkWu.js";import{C as b}from"./ClientDatabaseViewModel-DgDoSkZt.js";function $({...a}){return t.jsx(v,{"data-slot":"dialog",...a})}function H({...a}){return t.jsx(j,{"data-slot":"dialog-trigger",...a})}function M({...a}){return t.jsx(S,{"data-slot":"dialog-portal",...a})}function X({...a}){return t.jsx(C,{"data-slot":"dialog-close",...a})}function k({className:a,...e}){return t.jsx(N,{"data-slot":"dialog-overlay",className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...e})}function A({className:a,children:e,showCloseButton:D=!0,...p}){return t.jsxs(M,{"data-slot":"dialog-portal",children:[t.jsx(k,{}),t.jsxs(y,{"data-slot":"dialog-content",className:d("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...p,children:[e,D&&t.jsxs(C,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[t.jsx(I,{}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function J({className:a,...e}){return t.jsx("div",{"data-slot":"dialog-header",className:d("flex flex-col gap-2 text-center sm:text-left",a),...e})}function L({className:a,...e}){return t.jsx("div",{"data-slot":"dialog-footer",className:d("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...e})}function Q({className:a,...e}){return t.jsx(T,{"data-slot":"dialog-title",className:d("text-lg leading-none font-semibold",a),...e})}function W({className:a,...e}){return t.jsx(U,{"data-slot":"dialog-description",className:d("text-muted-foreground text-sm",a),...e})}const E=["UUID","host","port","databaseName","databaseSchema","username","password","project","valid"];function w(a,e){return _(a,E,e,"clientDatabase")}class h extends R{_UUID;_databaseName;_databaseSchema;_refreshToken;_host;_port;_username;_password;_project;_valid;constructor(e){super(e),this._UUID=e.UUID??"",this._databaseName=e.databaseName??"",this._databaseSchema=e.databaseSchema??"",this._refreshToken=e.refreshToken??"",this._host=e.host??"",this._port=e.port??"",this._username=e.username??"",this._password=e.password??"",this._project=e.project??"",this._valid=e.valid??!0}asViewModel(){return new b(this.asDto())}get UUID(){return this._UUID}set UUID(e){this._UUID=e}get databaseName(){return this._databaseName}set databaseName(e){this._databaseName=e}get databaseSchema(){return this._databaseSchema}set databaseSchema(e){this._databaseSchema=e}get refreshToken(){return this._refreshToken}set refreshToken(e){this._refreshToken=e}get host(){return this._host}set host(e){this._host=e}get port(){return this._port}set port(e){this._port=e}get username(){return this._username}set username(e){this._username=e}get password(){return this._password}set password(e){this._password=e}get project(){return this._project}set project(e){this._project=e}get valid(){return this._valid}set valid(e){this._valid=e}}const z=()=>{const{request:a}=O();return{indexClientDatabase:async()=>await a({url:"client-database/index",method:"GET"}),createClientDatabase:async r=>{const i=r.asDto(),c=w(i,new FormData),s=(await a({url:"/client-database/create",method:"POST",data:c})).clientDatabase;return new h(s)},updateClientDatabase:async r=>{const i=r.asDto(),c=w(i,new FormData),s=(await a({url:`/client-database/update?id=${i.UUID}`,method:"POST",data:c})).clientDatabase;return new h(s)},removeClientDatabase:async r=>{const i=new FormData;return r.forEach(c=>{i.append("UUIDs[]",c)}),await a({url:"/client-database/remove",method:"POST",data:i})},connectClientDatabase:async r=>await a({url:`/client-database/connect?id=${r}`,method:"GET"})}},Y=()=>{const{indexClientDatabase:a,createClientDatabase:e,updateClientDatabase:D,removeClientDatabase:p,connectClientDatabase:g}=z();return{indexClientDatabase:async s=>m(async()=>{const n=await a(),o=n.rows.map(l=>new b(l));return{...n,rows:o}},s),createClientDatabase:async(s,n)=>{let o=new h(s);return o=await m(async()=>e(o),{...n,onSuccess:l=>{const u=l.asViewModel();n?.onSuccess?.(u)}}),o.asViewModel()},updateClientDatabase:async(s,n)=>{let o=new h(s);return o=await m(async()=>D(o),{...n,onSuccess:l=>{const u=l.asViewModel();n?.onSuccess?.(u)}}),o.asViewModel()},removeClientDatabase:async(s,n)=>await m(async()=>p(s),n),connectClientDatabase:async(s,n)=>{const o=await m(async()=>g(s),{...n,onSuccess:l=>{const u=new b(l);n?.onSuccess?.(u)}});return new b(o)}}};export{$ as D,H as a,A as b,J as c,Q as d,W as e,L as f,X as g,Y as u};
