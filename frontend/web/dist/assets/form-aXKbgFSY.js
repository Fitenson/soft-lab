import{a as n,j as e,e as He,w as xt,H as vt,r as De}from"./main-D5RGKBYJ.js";import{V as gt,c as Oe,A as St}from"./app-layout-Djxe_jeY.js";import{c as wt,u as J,a as Fe,b as bt,d as Ue,R as yt,e as Me,f as Ct,A as jt,g as P,P as It,h as Tt,i as Nt,j as Pt,k as Et,F as _t,D as Rt,C as Mt,l as At,m as Dt}from"./dropdown-menu-B19Kqavm.js";import{u as L,c as Ot}from"./button-tYiIYUx0.js";import{P as M}from"./index-C0TucRMm.js";import{b as Ut}from"./breadcrumb-items-BRj2UYK6.js";import Lt from"./user-layout-7d3wQSxh.js";import{F as kt,a as z,b as W,c as K,d as $,e as Z}from"./form-TckwHYSY.js";import{I as ue}from"./input-DpbN7Yd6.js";import{T as Vt}from"./top-action-bar-Cdf6VidK.js";import{a as ne}from"./utils-Ce4EbVqB.js";import{u as Bt}from"./useAppSelector-BDP3TAc3.js";import{u as Ht}from"./use-show-toast-CN3ZEo13.js";import{c as ze}from"./createLucideIcon-C82_HNVK.js";import Ft from"./useUserService-CVVZ2LLO.js";import zt from"./useUserForm-C-oNZKBk.js";import{U as j}from"./UserFormField-D4DxJWb1.js";import"./zod-BtW-i1Xe.js";import"./schemas-6m5s2bNq.js";import"./serviceHandler-BlQljMi1.js";import"./useUserRepository-BE5mM1w4.js";import"./useRequest-BO6k6QAc.js";import"./BaseEntity-DGhPHkWu.js";import"./UserViewModel-BWSeG2eZ.js";import"./userSchema-mYZtX_K6.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],We=ze("chevron-down",Wt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],$t=ze("chevron-up",Kt);function Gt(o){const r=n.useRef({value:o,previous:o});return n.useMemo(()=>(r.current.value!==o&&(r.current.previous=r.current.value,r.current.value=o),r.current.previous),[o])}var Yt=[" ","Enter","ArrowUp","ArrowDown"],qt=[" ","Enter"],se="Select",[ve,ge,Xt]=Ct(se),[ce,or]=wt(se,[Xt,Fe]),Se=Fe(),[Zt,Q]=ce(se),[Jt,Qt]=ce(se),Ke=o=>{const{__scopeSelect:r,children:t,open:s,defaultOpen:c,onOpenChange:u,value:l,defaultValue:a,onValueChange:i,dir:m,name:v,autoComplete:S,disabled:T,required:C,form:p}=o,d=Se(r),[x,w]=n.useState(null),[h,g]=n.useState(null),[G,A]=n.useState(!1),ie=bt(m),[E,O]=Ue({prop:s,defaultProp:c??!1,onChange:u,caller:se}),[Y,te]=Ue({prop:l,defaultProp:a,onChange:i,caller:se}),k=n.useRef(null),V=x?p||!!x.closest("form"):!0,[q,B]=n.useState(new Set),H=Array.from(q).map(_=>_.props.value).join(";");return e.jsx(yt,{...d,children:e.jsxs(Zt,{required:C,scope:r,trigger:x,onTriggerChange:w,valueNode:h,onValueNodeChange:g,valueNodeHasChildren:G,onValueNodeHasChildrenChange:A,contentId:Me(),value:Y,onValueChange:te,open:E,onOpenChange:O,dir:ie,triggerPointerDownPosRef:k,disabled:T,children:[e.jsx(ve.Provider,{scope:r,children:e.jsx(Jt,{scope:o.__scopeSelect,onNativeOptionAdd:n.useCallback(_=>{B(U=>new Set(U).add(_))},[]),onNativeOptionRemove:n.useCallback(_=>{B(U=>{const F=new Set(U);return F.delete(_),F})},[]),children:t})}),V?e.jsxs(pt,{"aria-hidden":!0,required:C,tabIndex:-1,name:v,autoComplete:S,value:Y,onChange:_=>te(_.target.value),disabled:T,form:p,children:[Y===void 0?e.jsx("option",{value:""}):null,Array.from(q)]},H):null]})})};Ke.displayName=se;var $e="SelectTrigger",Ge=n.forwardRef((o,r)=>{const{__scopeSelect:t,disabled:s=!1,...c}=o,u=Se(t),l=Q($e,t),a=l.disabled||s,i=L(r,l.onTriggerChange),m=ge(t),v=n.useRef("touch"),[S,T,C]=ft(d=>{const x=m().filter(g=>!g.disabled),w=x.find(g=>g.value===l.value),h=ht(x,d,w);h!==void 0&&l.onValueChange(h.value)}),p=d=>{a||(l.onOpenChange(!0),C()),d&&(l.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)})};return e.jsx(jt,{asChild:!0,...u,children:e.jsx(M.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":mt(l.value)?"":void 0,...c,ref:i,onClick:P(c.onClick,d=>{d.currentTarget.focus(),v.current!=="mouse"&&p(d)}),onPointerDown:P(c.onPointerDown,d=>{v.current=d.pointerType;const x=d.target;x.hasPointerCapture(d.pointerId)&&x.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&d.pointerType==="mouse"&&(p(d),d.preventDefault())}),onKeyDown:P(c.onKeyDown,d=>{const x=S.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&T(d.key),!(x&&d.key===" ")&&Yt.includes(d.key)&&(p(),d.preventDefault())})})})});Ge.displayName=$e;var Ye="SelectValue",Te=n.forwardRef((o,r)=>{const{__scopeSelect:t,className:s,style:c,children:u,placeholder:l="",...a}=o,i=Q(Ye,t),{onValueNodeHasChildrenChange:m}=i,v=u!==void 0,S=L(r,i.onValueNodeChange);return J(()=>{m(v)},[m,v]),e.jsx(M.span,{...a,ref:S,style:{pointerEvents:"none"},children:mt(i.value)?e.jsx(e.Fragment,{children:l}):u})});Te.displayName=Ye;var eo="SelectIcon",qe=n.forwardRef((o,r)=>{const{__scopeSelect:t,children:s,...c}=o;return e.jsx(M.span,{"aria-hidden":!0,...c,ref:r,children:s||"â–¼"})});qe.displayName=eo;var to="SelectPortal",Xe=o=>e.jsx(It,{asChild:!0,...o});Xe.displayName=to;var le="SelectContent",Ze=n.forwardRef((o,r)=>{const t=Q(le,o.__scopeSelect),[s,c]=n.useState();if(J(()=>{c(new DocumentFragment)},[]),!t.open){const u=s;return u?He.createPortal(e.jsx(Je,{scope:o.__scopeSelect,children:e.jsx(ve.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),u):null}return e.jsx(Qe,{...o,ref:r})});Ze.displayName=le;var D=10,[Je,ee]=ce(le),oo="SelectContentImpl",ro=Ot("SelectContent.RemoveScroll"),Qe=n.forwardRef((o,r)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:c,onEscapeKeyDown:u,onPointerDownOutside:l,side:a,sideOffset:i,align:m,alignOffset:v,arrowPadding:S,collisionBoundary:T,collisionPadding:C,sticky:p,hideWhenDetached:d,avoidCollisions:x,...w}=o,h=Q(le,t),[g,G]=n.useState(null),[A,ie]=n.useState(null),E=L(r,f=>G(f)),[O,Y]=n.useState(null),[te,k]=n.useState(null),V=ge(t),[q,B]=n.useState(!1),H=n.useRef(!1);n.useEffect(()=>{if(g)return Nt(g)},[g]),Pt();const _=n.useCallback(f=>{const[I,...R]=V().map(N=>N.ref.current),[b]=R.slice(-1),y=document.activeElement;for(const N of f)if(N===y||(N?.scrollIntoView({block:"nearest"}),N===I&&A&&(A.scrollTop=0),N===b&&A&&(A.scrollTop=A.scrollHeight),N?.focus(),document.activeElement!==y))return},[V,A]),U=n.useCallback(()=>_([O,g]),[_,O,g]);n.useEffect(()=>{q&&U()},[q,U]);const{onOpenChange:F,triggerPointerDownPosRef:X}=h;n.useEffect(()=>{if(g){let f={x:0,y:0};const I=b=>{f={x:Math.abs(Math.round(b.pageX)-(X.current?.x??0)),y:Math.abs(Math.round(b.pageY)-(X.current?.y??0))}},R=b=>{f.x<=10&&f.y<=10?b.preventDefault():g.contains(b.target)||F(!1),document.removeEventListener("pointermove",I),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",I),document.addEventListener("pointerup",R,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",R,{capture:!0})}}},[g,F,X]),n.useEffect(()=>{const f=()=>F(!1);return window.addEventListener("blur",f),window.addEventListener("resize",f),()=>{window.removeEventListener("blur",f),window.removeEventListener("resize",f)}},[F]);const[we,fe]=ft(f=>{const I=V().filter(y=>!y.disabled),R=I.find(y=>y.ref.current===document.activeElement),b=ht(I,f,R);b&&setTimeout(()=>b.ref.current.focus())}),be=n.useCallback((f,I,R)=>{const b=!H.current&&!R;(h.value!==void 0&&h.value===I||b)&&(Y(f),b&&(H.current=!0))},[h.value]),ye=n.useCallback(()=>g?.focus(),[g]),ae=n.useCallback((f,I,R)=>{const b=!H.current&&!R;(h.value!==void 0&&h.value===I||b)&&k(f)},[h.value]),he=s==="popper"?Ne:et,de=he===Ne?{side:a,sideOffset:i,align:m,alignOffset:v,arrowPadding:S,collisionBoundary:T,collisionPadding:C,sticky:p,hideWhenDetached:d,avoidCollisions:x}:{};return e.jsx(Je,{scope:t,content:g,viewport:A,onViewportChange:ie,itemRefCallback:be,selectedItem:O,onItemLeave:ye,itemTextRefCallback:ae,focusSelectedItem:U,selectedItemText:te,position:s,isPositioned:q,searchRef:we,children:e.jsx(Et,{as:ro,allowPinchZoom:!0,children:e.jsx(_t,{asChild:!0,trapped:h.open,onMountAutoFocus:f=>{f.preventDefault()},onUnmountAutoFocus:P(c,f=>{h.trigger?.focus({preventScroll:!0}),f.preventDefault()}),children:e.jsx(Rt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:f=>f.preventDefault(),onDismiss:()=>h.onOpenChange(!1),children:e.jsx(he,{role:"listbox",id:h.contentId,"data-state":h.open?"open":"closed",dir:h.dir,onContextMenu:f=>f.preventDefault(),...w,...de,onPlaced:()=>B(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:P(w.onKeyDown,f=>{const I=f.ctrlKey||f.altKey||f.metaKey;if(f.key==="Tab"&&f.preventDefault(),!I&&f.key.length===1&&fe(f.key),["ArrowUp","ArrowDown","Home","End"].includes(f.key)){let b=V().filter(y=>!y.disabled).map(y=>y.ref.current);if(["ArrowUp","End"].includes(f.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(f.key)){const y=f.target,N=b.indexOf(y);b=b.slice(N+1)}setTimeout(()=>_(b)),f.preventDefault()}})})})})})})});Qe.displayName=oo;var no="SelectItemAlignedPosition",et=n.forwardRef((o,r)=>{const{__scopeSelect:t,onPlaced:s,...c}=o,u=Q(le,t),l=ee(le,t),[a,i]=n.useState(null),[m,v]=n.useState(null),S=L(r,E=>v(E)),T=ge(t),C=n.useRef(!1),p=n.useRef(!0),{viewport:d,selectedItem:x,selectedItemText:w,focusSelectedItem:h}=l,g=n.useCallback(()=>{if(u.trigger&&u.valueNode&&a&&m&&d&&x&&w){const E=u.trigger.getBoundingClientRect(),O=m.getBoundingClientRect(),Y=u.valueNode.getBoundingClientRect(),te=w.getBoundingClientRect();if(u.dir!=="rtl"){const y=te.left-O.left,N=Y.left-y,oe=E.left-N,re=E.width+oe,Ce=Math.max(re,O.width),je=window.innerWidth-D,Ie=Oe(N,[D,Math.max(D,je-Ce)]);a.style.minWidth=re+"px",a.style.left=Ie+"px"}else{const y=O.right-te.right,N=window.innerWidth-Y.right-y,oe=window.innerWidth-E.right-N,re=E.width+oe,Ce=Math.max(re,O.width),je=window.innerWidth-D,Ie=Oe(N,[D,Math.max(D,je-Ce)]);a.style.minWidth=re+"px",a.style.right=Ie+"px"}const k=T(),V=window.innerHeight-D*2,q=d.scrollHeight,B=window.getComputedStyle(m),H=parseInt(B.borderTopWidth,10),_=parseInt(B.paddingTop,10),U=parseInt(B.borderBottomWidth,10),F=parseInt(B.paddingBottom,10),X=H+_+q+F+U,we=Math.min(x.offsetHeight*5,X),fe=window.getComputedStyle(d),be=parseInt(fe.paddingTop,10),ye=parseInt(fe.paddingBottom,10),ae=E.top+E.height/2-D,he=V-ae,de=x.offsetHeight/2,f=x.offsetTop+de,I=H+_+f,R=X-I;if(I<=ae){const y=k.length>0&&x===k[k.length-1].ref.current;a.style.bottom="0px";const N=m.clientHeight-d.offsetTop-d.offsetHeight,oe=Math.max(he,de+(y?ye:0)+N+U),re=I+oe;a.style.height=re+"px"}else{const y=k.length>0&&x===k[0].ref.current;a.style.top="0px";const oe=Math.max(ae,H+d.offsetTop+(y?be:0)+de)+R;a.style.height=oe+"px",d.scrollTop=I-ae+d.offsetTop}a.style.margin=`${D}px 0`,a.style.minHeight=we+"px",a.style.maxHeight=V+"px",s?.(),requestAnimationFrame(()=>C.current=!0)}},[T,u.trigger,u.valueNode,a,m,d,x,w,u.dir,s]);J(()=>g(),[g]);const[G,A]=n.useState();J(()=>{m&&A(window.getComputedStyle(m).zIndex)},[m]);const ie=n.useCallback(E=>{E&&p.current===!0&&(g(),h?.(),p.current=!1)},[g,h]);return e.jsx(lo,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:C,onScrollButtonChange:ie,children:e.jsx("div",{ref:i,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:G},children:e.jsx(M.div,{...c,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...c.style}})})})});et.displayName=no;var so="SelectPopperPosition",Ne=n.forwardRef((o,r)=>{const{__scopeSelect:t,align:s="start",collisionPadding:c=D,...u}=o,l=Se(t);return e.jsx(Mt,{...l,...u,ref:r,align:s,collisionPadding:c,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ne.displayName=so;var[lo,Ae]=ce(le,{}),Pe="SelectViewport",tt=n.forwardRef((o,r)=>{const{__scopeSelect:t,nonce:s,...c}=o,u=ee(Pe,t),l=Ae(Pe,t),a=L(r,u.onViewportChange),i=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),e.jsx(ve.Slot,{scope:t,children:e.jsx(M.div,{"data-radix-select-viewport":"",role:"presentation",...c,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...c.style},onScroll:P(c.onScroll,m=>{const v=m.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:T}=l;if(T?.current&&S){const C=Math.abs(i.current-v.scrollTop);if(C>0){const p=window.innerHeight-D*2,d=parseFloat(S.style.minHeight),x=parseFloat(S.style.height),w=Math.max(d,x);if(w<p){const h=w+C,g=Math.min(p,h),G=h-g;S.style.height=g+"px",S.style.bottom==="0px"&&(v.scrollTop=G>0?G:0,S.style.justifyContent="flex-end")}}}i.current=v.scrollTop})})})]})});tt.displayName=Pe;var ot="SelectGroup",[ao,co]=ce(ot),io=n.forwardRef((o,r)=>{const{__scopeSelect:t,...s}=o,c=Me();return e.jsx(ao,{scope:t,id:c,children:e.jsx(M.div,{role:"group","aria-labelledby":c,...s,ref:r})})});io.displayName=ot;var rt="SelectLabel",uo=n.forwardRef((o,r)=>{const{__scopeSelect:t,...s}=o,c=co(rt,t);return e.jsx(M.div,{id:c.id,...s,ref:r})});uo.displayName=rt;var xe="SelectItem",[po,nt]=ce(xe),st=n.forwardRef((o,r)=>{const{__scopeSelect:t,value:s,disabled:c=!1,textValue:u,...l}=o,a=Q(xe,t),i=ee(xe,t),m=a.value===s,[v,S]=n.useState(u??""),[T,C]=n.useState(!1),p=L(r,h=>i.itemRefCallback?.(h,s,c)),d=Me(),x=n.useRef("touch"),w=()=>{c||(a.onValueChange(s),a.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(po,{scope:t,value:s,disabled:c,textId:d,isSelected:m,onItemTextChange:n.useCallback(h=>{S(g=>g||(h?.textContent??"").trim())},[]),children:e.jsx(ve.ItemSlot,{scope:t,value:s,disabled:c,textValue:v,children:e.jsx(M.div,{role:"option","aria-labelledby":d,"data-highlighted":T?"":void 0,"aria-selected":m&&T,"data-state":m?"checked":"unchecked","aria-disabled":c||void 0,"data-disabled":c?"":void 0,tabIndex:c?void 0:-1,...l,ref:p,onFocus:P(l.onFocus,()=>C(!0)),onBlur:P(l.onBlur,()=>C(!1)),onClick:P(l.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:P(l.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:P(l.onPointerDown,h=>{x.current=h.pointerType}),onPointerMove:P(l.onPointerMove,h=>{x.current=h.pointerType,c?i.onItemLeave?.():x.current==="mouse"&&h.currentTarget.focus({preventScroll:!0})}),onPointerLeave:P(l.onPointerLeave,h=>{h.currentTarget===document.activeElement&&i.onItemLeave?.()}),onKeyDown:P(l.onKeyDown,h=>{i.searchRef?.current!==""&&h.key===" "||(qt.includes(h.key)&&w(),h.key===" "&&h.preventDefault())})})})})});st.displayName=xe;var me="SelectItemText",lt=n.forwardRef((o,r)=>{const{__scopeSelect:t,className:s,style:c,...u}=o,l=Q(me,t),a=ee(me,t),i=nt(me,t),m=Qt(me,t),[v,S]=n.useState(null),T=L(r,w=>S(w),i.onItemTextChange,w=>a.itemTextRefCallback?.(w,i.value,i.disabled)),C=v?.textContent,p=n.useMemo(()=>e.jsx("option",{value:i.value,disabled:i.disabled,children:C},i.value),[i.disabled,i.value,C]),{onNativeOptionAdd:d,onNativeOptionRemove:x}=m;return J(()=>(d(p),()=>x(p)),[d,x,p]),e.jsxs(e.Fragment,{children:[e.jsx(M.span,{id:i.textId,...u,ref:T}),i.isSelected&&l.valueNode&&!l.valueNodeHasChildren?He.createPortal(u.children,l.valueNode):null]})});lt.displayName=me;var at="SelectItemIndicator",ct=n.forwardRef((o,r)=>{const{__scopeSelect:t,...s}=o;return nt(at,t).isSelected?e.jsx(M.span,{"aria-hidden":!0,...s,ref:r}):null});ct.displayName=at;var Ee="SelectScrollUpButton",it=n.forwardRef((o,r)=>{const t=ee(Ee,o.__scopeSelect),s=Ae(Ee,o.__scopeSelect),[c,u]=n.useState(!1),l=L(r,s.onScrollButtonChange);return J(()=>{if(t.viewport&&t.isPositioned){let a=function(){const m=i.scrollTop>0;u(m)};const i=t.viewport;return a(),i.addEventListener("scroll",a),()=>i.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),c?e.jsx(ut,{...o,ref:l,onAutoScroll:()=>{const{viewport:a,selectedItem:i}=t;a&&i&&(a.scrollTop=a.scrollTop-i.offsetHeight)}}):null});it.displayName=Ee;var _e="SelectScrollDownButton",dt=n.forwardRef((o,r)=>{const t=ee(_e,o.__scopeSelect),s=Ae(_e,o.__scopeSelect),[c,u]=n.useState(!1),l=L(r,s.onScrollButtonChange);return J(()=>{if(t.viewport&&t.isPositioned){let a=function(){const m=i.scrollHeight-i.clientHeight,v=Math.ceil(i.scrollTop)<m;u(v)};const i=t.viewport;return a(),i.addEventListener("scroll",a),()=>i.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),c?e.jsx(ut,{...o,ref:l,onAutoScroll:()=>{const{viewport:a,selectedItem:i}=t;a&&i&&(a.scrollTop=a.scrollTop+i.offsetHeight)}}):null});dt.displayName=_e;var ut=n.forwardRef((o,r)=>{const{__scopeSelect:t,onAutoScroll:s,...c}=o,u=ee("SelectScrollButton",t),l=n.useRef(null),a=ge(t),i=n.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return n.useEffect(()=>()=>i(),[i]),J(()=>{a().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),e.jsx(M.div,{"aria-hidden":!0,...c,ref:r,style:{flexShrink:0,...c.style},onPointerDown:P(c.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:P(c.onPointerMove,()=>{u.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:P(c.onPointerLeave,()=>{i()})})}),mo="SelectSeparator",fo=n.forwardRef((o,r)=>{const{__scopeSelect:t,...s}=o;return e.jsx(M.div,{"aria-hidden":!0,...s,ref:r})});fo.displayName=mo;var Re="SelectArrow",ho=n.forwardRef((o,r)=>{const{__scopeSelect:t,...s}=o,c=Se(t),u=Q(Re,t),l=ee(Re,t);return u.open&&l.position==="popper"?e.jsx(At,{...c,...s,ref:r}):null});ho.displayName=Re;var xo="SelectBubbleInput",pt=n.forwardRef(({__scopeSelect:o,value:r,...t},s)=>{const c=n.useRef(null),u=L(s,c),l=Gt(r);return n.useEffect(()=>{const a=c.current;if(!a)return;const i=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(i,"value").set;if(l!==r&&v){const S=new Event("change",{bubbles:!0});v.call(a,r),a.dispatchEvent(S)}},[l,r]),e.jsx(M.select,{...t,style:{...gt,...t.style},ref:u,defaultValue:r})});pt.displayName=xo;function mt(o){return o===""||o===void 0}function ft(o){const r=Tt(o),t=n.useRef(""),s=n.useRef(0),c=n.useCallback(l=>{const a=t.current+l;r(a),(function i(m){t.current=m,window.clearTimeout(s.current),m!==""&&(s.current=window.setTimeout(()=>i(""),1e3))})(a)},[r]),u=n.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,c,u]}function ht(o,r,t){const c=r.length>1&&Array.from(r).every(m=>m===r[0])?r[0]:r,u=t?o.indexOf(t):-1;let l=vo(o,Math.max(u,0));c.length===1&&(l=l.filter(m=>m!==t));const i=l.find(m=>m.textValue.toLowerCase().startsWith(c.toLowerCase()));return i!==t?i:void 0}function vo(o,r){return o.map((t,s)=>o[(r+s)%o.length])}var go=Ke,So=Ge,wo=qe,bo=Xe,yo=Ze,Co=tt,jo=st,Io=lt,To=ct,No=it,Po=dt;function Le({className:o,...r}){return e.jsx("textarea",{"data-slot":"textarea",className:ne("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),...r})}function ke({...o}){return e.jsx(go,{"data-slot":"select",...o})}function Ve({className:o,size:r="default",children:t,...s}){return e.jsxs(So,{"data-slot":"select-trigger","data-size":r,className:ne("cursor-pointer border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",o),...s,children:[t,e.jsx(wo,{asChild:!0,children:e.jsx(We,{className:"size-4 opacity-50"})})]})}function Be({className:o,children:r,position:t="popper",...s}){return e.jsx(bo,{children:e.jsxs(yo,{"data-slot":"select-content",className:ne("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t,...s,children:[e.jsx(Eo,{}),e.jsx(Co,{className:ne("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),e.jsx(_o,{})]})})}function pe({className:o,children:r,...t}){return e.jsxs(jo,{"data-slot":"select-item",className:ne("cursor-pointer focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",o),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(To,{children:e.jsx(Dt,{className:"size-4"})})}),e.jsx(Io,{children:r})]})}function Eo({className:o,...r}){return e.jsx(No,{"data-slot":"select-scroll-up-button",className:ne("flex cursor-default items-center justify-center py-1",o),...r,children:e.jsx($t,{className:"size-4"})})}function _o({className:o,...r}){return e.jsx(Po,{"data-slot":"select-scroll-down-button",className:ne("flex cursor-default items-center justify-center py-1",o),...r,children:e.jsx(We,{className:"size-4"})})}function rr(){const{user:o}=xt().props,r=Bt(p=>p.loading.global),t=Ht(),{form:s,setFormError:c,userViewModel:u,setUserViewModel:l}=zt({userDTO:o}),{createUser:a,updateUser:i,removeUser:m}=Ft(),v=[...Ut??[],{title:u?.username??"Create",href:"/"}],S=[{value:"Admin",label:"Admin"},{value:"Supervisor",label:"Supervisor"},{value:"User",label:"User"},{value:"Developer",label:"Developer"}],T=async()=>{const d={...s.getValues(),...u?.UUID?{UUID:u?.UUID}:{}};try{if(u?.UUID){const x=await i(d);l(x),t("Success","Update user successfully","success")}else{const x=await a(d);t("Success","Create user successfully","success"),De.visit(`/user/view?id=${x.UUID}`)}}catch(x){c(x),t("Error","Server error","error")}},C=async()=>{if(u?.UUID){const p=[u.UUID];await m(p,{onSuccess:async d=>{d?.success&&d?.success.length>0?(t("Success","Successfully remove the user. Redirecting to main page","success"),De.visit("/user/index")):t("Error","Failed to remove the user","error")},onError:async()=>{t("Error","Something wrong with the server","error")}})}};return e.jsxs(St,{breadcrumbs:v,children:[e.jsx(vt,{title:u?.fullName??"Create"}),e.jsx(Lt,{children:e.jsx(kt,{...s,children:e.jsxs("form",{className:"grid grid-cols-4 gap-6 w-full items-start",onSubmit:s.handleSubmit(T),children:[e.jsx("div",{className:"col-span-4",children:e.jsx(Vt,{saveAction:!0,browseAction:{to:"/user/index"},deleteAction:{action:C}})}),e.jsx(z,{control:s.control,name:j.username.name,render:({field:p})=>e.jsxs(W,{children:[e.jsx(K,{children:j.username.label}),e.jsx($,{children:e.jsx(ue,{...p,required:!0,disabled:r})}),e.jsx(Z,{})]})}),e.jsx(z,{control:s.control,name:j.fullName.name,render:({field:p})=>e.jsxs(W,{children:[e.jsx(K,{children:j.fullName.label}),e.jsx($,{children:e.jsx(ue,{...p,disabled:r})}),e.jsx(Z,{})]})}),e.jsx(z,{control:s.control,name:j.email.name,render:({field:p})=>e.jsxs(W,{children:[e.jsx(K,{children:j.email.label}),e.jsx($,{children:e.jsx(ue,{...p,required:!0,disabled:r})}),e.jsx(Z,{})]})}),e.jsx(z,{control:s.control,name:j.title.name,render:({field:p})=>e.jsxs(W,{children:[e.jsx(K,{children:j.title.label}),e.jsx($,{children:e.jsx(ue,{...p,value:p.value??void 0,disabled:r})}),e.jsx(Z,{})]})}),e.jsx(z,{control:s.control,name:j.phoneNo.name,render:({field:p})=>e.jsxs(W,{children:[e.jsx(K,{children:j.phoneNo.label}),e.jsx($,{children:e.jsx(ue,{...p,value:p.value??void 0,disabled:r})}),e.jsx(Z,{})]})}),e.jsx(z,{control:s.control,name:j.gender.name,render:({field:p})=>e.jsxs(W,{className:"w-full",children:[e.jsx(K,{children:j.gender.label}),e.jsx($,{className:"w-full",children:e.jsxs(ke,{onValueChange:p.onChange,defaultValue:p.value??"",children:[e.jsx(Ve,{className:"w-full",children:e.jsx(Te,{placeholder:j.gender.label})}),e.jsxs(Be,{className:"w-full",children:[e.jsx(pe,{value:"Male",children:"Male"}),e.jsx(pe,{value:"Female",children:"Female"}),e.jsx(pe,{value:"Others",children:"Others"}),e.jsx(pe,{value:"Rather not say",children:"Rather not say"})]})]})}),e.jsx(Z,{})]})}),e.jsx(z,{control:s.control,name:j.role.name,render:({field:p})=>e.jsxs(W,{className:"w-full",children:[e.jsx(K,{children:j.role.label}),e.jsx($,{className:"w-full",children:e.jsxs(ke,{onValueChange:p.onChange,defaultValue:p.value??"",children:[e.jsx(Ve,{className:"w-full",children:e.jsx(Te,{placeholder:j.role.label})}),e.jsx(Be,{className:"w-full",children:S.map(d=>e.jsx(pe,{value:d.value,children:d.label}))})]})}),e.jsx(Z,{})]})}),e.jsx(z,{control:s.control,name:j.description.name,render:({field:p})=>e.jsxs(W,{className:"col-span-2",children:[e.jsx(K,{children:j.description.label}),e.jsx($,{children:e.jsx(Le,{...p,value:p.value??"",disabled:r,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})})]})}),e.jsx(z,{control:s.control,name:j.address.name,render:({field:p})=>e.jsxs(W,{className:"col-span-2",children:[e.jsx(K,{children:j.address.label}),e.jsx($,{children:e.jsx(Le,{...p,value:p.value??"",disabled:r,rows:4,style:{resize:"vertical",overflowY:"auto",maxHeight:"8rem",minHeight:"8rem"}})}),e.jsx(Z,{})]})})]})})})]})}export{rr as default};
