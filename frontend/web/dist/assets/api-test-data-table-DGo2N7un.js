import{a as h,j as e,D as J,P as Q,M as E,X as W,K as B,L as _,ad as Y,w as Z,g as ee}from"./main-izxaliaV.js";import{u as te,f as ae,b as re}from"./index-DDOOTtlr.js";import{T as se,a as ne,b as y,c as oe,d as le,e as D}from"./table-BGqCVyu6.js";import{c as R}from"./ColumnConfig-6tbpjRFT.js";import{A as k}from"./ApiTestDataFormField-DPE5FzC8.js";import{u as ce,S as ie,a as de,c as ue,d as w}from"./select-BsIQayk5.js";import{C as pe}from"./check-BVUkRrmU.js";import{S as be}from"./skeleton-6JwENJXZ.js";import{u as he}from"./useAppSelector-WPIkilGz.js";import{I as me}from"./input-Bsf0DwKO.js";import{F as fe,a as A,b as I,d as z}from"./form-Dg9MJd5e.js";import{d as xe}from"./index.esm-CIjoDSgn.js";import"./button-DY5-B3Bs.js";import"./createLucideIcon-Ckg_wYdv.js";import"./index-CzL2Ojfc.js";import"./index-DJIJZoV6.js";var S="Checkbox",[ge,He]=J(S),[ke,P]=ge(S);function Ce(t){const{__scopeCheckbox:n,checked:c,children:i,defaultChecked:d,disabled:a,form:p,name:m,onCheckedChange:u,required:s,value:r="on",internal_do_not_use_render:o}=t,[l,x]=W({prop:c,defaultProp:d??!1,onChange:u,caller:S}),[g,v]=h.useState(null),[j,b]=h.useState(null),f=h.useRef(!1),T=g?!!p||!!g.closest("form"):!0,N={checked:l,disabled:a,setChecked:x,control:g,setControl:v,name:m,form:p,value:r,hasConsumerStoppedPropagationRef:f,required:s,defaultChecked:C(d)?!1:d,isFormControl:T,bubbleInput:j,setBubbleInput:b};return e.jsx(ke,{scope:n,...N,children:ve(o)?o(N):i})}var L="CheckboxTrigger",M=h.forwardRef(({__scopeCheckbox:t,onKeyDown:n,onClick:c,...i},d)=>{const{control:a,value:p,disabled:m,checked:u,required:s,setControl:r,setChecked:o,hasConsumerStoppedPropagationRef:l,isFormControl:x,bubbleInput:g}=P(L,t),v=B(d,r),j=h.useRef(u);return h.useEffect(()=>{const b=a?.form;if(b){const f=()=>o(j.current);return b.addEventListener("reset",f),()=>b.removeEventListener("reset",f)}},[a,o]),e.jsx(E.button,{type:"button",role:"checkbox","aria-checked":C(u)?"mixed":u,"aria-required":s,"data-state":O(u),"data-disabled":m?"":void 0,disabled:m,value:p,...i,ref:v,onKeyDown:_(n,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:_(c,b=>{o(f=>C(f)?!0:!f),g&&x&&(l.current=b.isPropagationStopped(),l.current||b.stopPropagation())})})});M.displayName=L;var K=h.forwardRef((t,n)=>{const{__scopeCheckbox:c,name:i,checked:d,defaultChecked:a,required:p,disabled:m,value:u,onCheckedChange:s,form:r,...o}=t;return e.jsx(Ce,{__scopeCheckbox:c,checked:d,defaultChecked:a,disabled:m,required:p,onCheckedChange:s,name:i,form:r,value:u,internal_do_not_use_render:({isFormControl:l})=>e.jsxs(e.Fragment,{children:[e.jsx(M,{...o,ref:n,__scopeCheckbox:c}),l&&e.jsx(q,{__scopeCheckbox:c})]})})});K.displayName=S;var $="CheckboxIndicator",H=h.forwardRef((t,n)=>{const{__scopeCheckbox:c,forceMount:i,...d}=t,a=P($,c);return e.jsx(Q,{present:i||C(a.checked)||a.checked===!0,children:e.jsx(E.span,{"data-state":O(a.checked),"data-disabled":a.disabled?"":void 0,...d,ref:n,style:{pointerEvents:"none",...t.style}})})});H.displayName=$;var V="CheckboxBubbleInput",q=h.forwardRef(({__scopeCheckbox:t,...n},c)=>{const{control:i,hasConsumerStoppedPropagationRef:d,checked:a,defaultChecked:p,required:m,disabled:u,name:s,value:r,form:o,bubbleInput:l,setBubbleInput:x}=P(V,t),g=B(c,x),v=ce(a),j=Y(i);h.useEffect(()=>{const f=l;if(!f)return;const T=window.HTMLInputElement.prototype,F=Object.getOwnPropertyDescriptor(T,"checked").set,G=!d.current;if(v!==a&&F){const U=new Event("click",{bubbles:G});f.indeterminate=C(a),F.call(f,C(a)?!1:a),f.dispatchEvent(U)}},[l,v,a,d]);const b=h.useRef(C(a)?!1:a);return e.jsx(E.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??b.current,required:m,disabled:u,name:s,value:r,form:o,...n,tabIndex:-1,ref:g,style:{...n.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});q.displayName=V;function ve(t){return typeof t=="function"}function C(t){return t==="indeterminate"}function O(t){return C(t)?"indeterminate":t?"checked":"unchecked"}function X({className:t,...n}){return e.jsx(K,{"data-slot":"checkbox",className:Z("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:e.jsx(H,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(pe,{className:"size-3.5"})})})}function je(t,n){return({getValue:c,row:i})=>{const d=!!c(),a=i.original,p=n?.disabled?.(a)??!1,m=n?.ariaLabel?.(a)??"Toggle";return e.jsx("div",{className:"flex items-center",onClick:u=>u.stopPropagation(),children:e.jsx(X,{checked:d,disabled:p,"aria-label":m,onCheckedChange:u=>t({row:a,next:!!u}),className:"translate-y-[1px]"})})}}const ye=[R({accessorKey:k.enabled.name,header:null,size:44,minSize:36,maxSize:64,enableSorting:!1,cell:je(({row:t,next:n})=>{console.log(t),console.log(n)},{})}),R({accessorKey:k.key.name,header:k.key.label,enableSorting:!1}),R({accessorKey:k.value.name,header:k.value.label,enableSorting:!1}),R({accessorKey:k.description.name,header:k.description.label,enableSorting:!1})],Re=["key","value","description"],Se=t=>Re.includes(t);function Ve({form:t}){const{fields:n,append:c}=xe({control:t.control,name:"apiTestData"}),i=te({data:t.getValues("apiTestData")??[],columns:ye,enableRowSelection:!0,enableSorting:!1,enableFilters:!1,enableSortingRemoval:!1,getCoreRowModel:re()}),d=he(ee),a=h.useRef(null),p=s=>{if(typeof s=="number"){if(a.current===s)return;a.current=s}c({enabled:0,key:"",value:"",description:""},{shouldFocus:!1})},m=(s,r)=>{t.setValue(`apiTestData.${s}.enabled`,r),s===n.length-1&&r===1&&p(s)},u=s=>{t.getValues(`apiTestData.${s}.enabled`)!==1&&t.setValue(`apiTestData.${s}.enabled`,1),s===n.length-1&&p(s)};return h.useEffect(()=>{n.length===0&&(c({enabled:0,key:"",value:"",description:""},{shouldFocus:!1}),a.current=null)},[n.length,c]),e.jsx(fe,{...t,children:e.jsxs(se,{className:"card",children:[e.jsx(ne,{children:i.getHeaderGroups().map(s=>e.jsx(y,{className:"border-b border-accent dark:border-accent",children:s.headers.map(r=>e.jsxs(oe,{className:"m-0 p-0 border-r border-accent dark:border-accent last:border-r-0",style:{width:r.getSize()},children:[r.isPlaceholder?null:ae(r.column.columnDef.header,r.getContext()),r.column.getCanResize()&&e.jsx("div",{onMouseDown:r.getResizeHandler(),onTouchStart:r.getResizeHandler(),className:`absolute right-0 top-0 h-full w-1 cursor-col-resize select-none
                                            ${r.column.getIsResizing()?"bg-blue-500":"bg-transparent hover:bg-gray-400"}`})]},r.id))},s.id))}),e.jsx(le,{children:d?Array.from({length:5}).map((s,r)=>e.jsx(y,{children:i.getAllLeafColumns().map(o=>e.jsx("td",{className:"px-2 py-2",children:e.jsx(be,{className:"h-4 w-full rounded-2xl p-4 m-1 gap-2"})},o.id))},`skeleton-${r}`)):n.length>0?n.map((s,r)=>e.jsx(y,{className:"cursor-pointer p-2 border border-accent dark:border-accent text-foreground dark:text-foreground",children:i.getAllLeafColumns().map(o=>e.jsx(D,{className:"p-2",children:o.id===k.enabled.name?e.jsx(A,{control:t.control,name:`apiTestData.${r}.enabled`,render:({field:l})=>e.jsx(I,{children:e.jsx(z,{children:e.jsx("div",{onClick:x=>x.stopPropagation(),className:"flex items-center",children:e.jsx(X,{checked:l.value===1,onCheckedChange:x=>{const g=x?1:0;l.onChange(g),m(r,g)},"aria-label":"Toggle",className:"cursor-pointer h-6 w-6 shrink-0 translate-y-[1px]"})})})})}):Se(o.id)&&e.jsx(A,{control:t.control,name:`apiTestData.${r}.${o.id}`,render:({field:l})=>e.jsx(I,{children:e.jsx(z,{children:e.jsxs("div",{className:"flex flex-row gap-1",children:[e.jsx(me,{...l,value:l.value??"",onChange:x=>l.onChange(x.target.value),onFocus:()=>u(r),className:"w-full h-8"}),o.id===k.value.name&&e.jsxs(ie,{onValueChange:l.onChange,defaultValue:l.value??"",children:[e.jsx(de,{className:"h-6 w-6 flex items-center justify-center rounded-md border text-xs p-1"}),e.jsxs(ue,{children:[e.jsx(w,{value:"text",children:"Text"}),e.jsx(w,{value:"dropdown",children:"Dropdown"}),e.jsx(w,{value:"file",children:"File"})]})]})]})})})})},o.id))},s.id)):e.jsx(y,{children:e.jsx(D,{colSpan:i.getAllLeafColumns().length,className:"h-24 text-center text-muted-foreground",children:"No test data rows found."})})})]})})}export{Ve as default};
