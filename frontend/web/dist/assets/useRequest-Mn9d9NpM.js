import{a as i,e as m,u as g,f as u,g as c,h as w,r as b}from"./main-pQhv4PK_.js";import{u as d}from"./useAppSelector-CaMT8LJQ.js";const y=()=>{const a=i.useMemo(()=>m.create({baseURL:"http://softlab-backend.test/backend",withCredentials:!0}),[]),h=d(e=>e.loading.global),s=d(e=>e.auth.authViewModel),l=g(),[p,f]=i.useState(null);return{isLoading:h,error:p,request:async e=>{const r=e?.withLoading!==!1;let o={};if(r&&u.dispatch(c(!0)),s){const t=`${s.username}:${s.password}`;o={Authorization:`Basic ${btoa(t)}`}}try{return(await a.request({url:e?.url,method:e?.method,data:e?.data,...e?.config,headers:{"Content-Type":"multipart/form-data",...o}})).data}catch(t){const n=t;throw n.response&&n.response.status===401&&(l(w()),b.visit("/login")),f(t),t}finally{r&&u.dispatch(c(!1))}},axiosInstance:a}};export{y as u};
