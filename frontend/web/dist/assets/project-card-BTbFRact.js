import{u as f,R as x,a as D,g as b,j as e,h,r as C}from"./main-B9kSPlih.js";import{C as j,a as S,b as N,d as g,e as w}from"./card-DX6sDEeB.js";import{B as l}from"./button-IWkCiMuA.js";import{D as U,a as I,b as T,c as k}from"./dropdown-menu-EfGzStmX.js";import{C as v}from"./ClientDatabaseViewModel-CZz8IN5P.js";import{u as E}from"./useClientDatabaseService-B3NIh_j4.js";import{u as i}from"./useAppSelector-5m2jQQPi.js";import{u as y}from"./use-show-toast-aS1BksgY.js";import"./index-Qz_8aHxD.js";import"./index-B39AUxGu.js";import"./index-Cr9z3bEa.js";import"./index-1aM9UPTl.js";import"./check-CfYvyZhz.js";import"./createLucideIcon-CDI3oWZc.js";import"./serviceHandler-BlQljMi1.js";import"./useRequest-w8ljcJHi.js";import"./useAuthState-Di_HTcE-.js";import"./BaseEntity-DGhPHkWu.js";function Y({projectViewModel:s}){const d=f(),[t,n]=x.useState(),{connectClientDatabase:m}=E(),c=i(a=>a.clientDatabase.clientDatabase),[o]=D.useState(()=>c?new v(c):null),r=y(),u=i(b),p=async()=>{o?.UUID!=t?.UUID?await m(t?.UUID??"",{onSuccess:a=>{d(h(a.dto)),r("Success","Successfully connecting user to database","success")},onError:()=>{r("Error","Failed to connect user to database","error")}}):(o&&n(o),r("Success","Successfully connecting user to database","success")),C.visit(`/backend/api-test/dashboard?id=${s?.UUID}`)};return e.jsxs(j,{className:"w-full h-full flex flex-col",children:[e.jsx(S,{children:e.jsx(N,{className:"text-center font-semibold",children:s.projectCode})}),e.jsxs(g,{className:"flex flex-col gap-2 flex-1 mb-2",children:[e.jsxs("div",{className:"text-start text-foreground dark:text-foreground",children:[e.jsx("span",{className:"font-medium",children:"Project: "}),e.jsx("span",{className:"font-normal",children:s.projectName})]}),e.jsxs(U,{children:[e.jsx(I,{asChild:!0,children:e.jsx(l,{variant:"outline",children:t?t.databaseName:"Select Database"})}),e.jsx(T,{children:s.clientDatabases.map(a=>e.jsx(k,{onClick:()=>n(a),children:a.databaseName},a.UUID))})]})]}),e.jsx(w,{className:"flex flex-col w-full mt-auto",children:e.jsx(l,{className:"w-full",disabled:u,onClick:p,children:"Connect"})})]})}export{Y as default};
